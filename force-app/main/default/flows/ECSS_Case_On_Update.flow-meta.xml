<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Case_Creation_Registration_Email</name>
        <label>Case Creation Registration Email</label>
        <locationX>1612</locationX>
        <locationY>5891</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Check_for_SMS</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>getOrgWideAddress.Address</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>relatedRecordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientId</name>
            <value>
                <elementReference>$Record.ContactId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>logEmailOnSend</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailTemplateId</name>
            <value>
                <elementReference>Get_Email_Template_for_Case_Id.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Copy_1_of_Notify_Case_Owner_of_accCreationRejection</name>
        <label>Notify Case Owner of accCreation Rejection</label>
        <locationX>2272</locationX>
        <locationY>971</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Custom_Notification.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>Receipents</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Account Creation Rejection</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>Please not that the new Case and new Account have been rejected</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>ECSS_CaseEmailTemplateAssignment</name>
        <label>ECSS_CaseEmailTemplateAssignment</label>
        <locationX>1821</locationX>
        <locationY>4643</locationY>
        <actionName>ECSS_CaseEmailTemplateAssignment</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_Email_Template_for_Case_Id</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseList</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_CaseEmailTemplateAssignment</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Email_On_Payment_Completion</name>
        <label>Email On Payment Completion</label>
        <locationX>1568</locationX>
        <locationY>863</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>RecpientsEmails</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Payment Completed on Case {!$Record.CaseNumber}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <stringValue>Please note that the payment on Case {!$Record.CaseNumber} has been completed</stringValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Get_Email_Template_Name</name>
        <label>Get Email Template Name</label>
        <locationX>3328</locationX>
        <locationY>863</locationY>
        <actionName>ECSS_CaseEmailTemplateAssignment</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_Email_Template_Id</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseList</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_CaseEmailTemplateAssignment</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Notify_Case_Owner</name>
        <label>Notify Case Owner</label>
        <locationX>1304</locationX>
        <locationY>755</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Custom_Notification.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>Receipents</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Documents Uploaded on Case {!$Record.CaseNumber}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>Please not that the customer finished uploading documents on Case {!$Record.CaseNumber}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Notify_Case_Owner_of_accCreation</name>
        <label>Notify Case Owner of accCreation</label>
        <locationX>1964</locationX>
        <locationY>1379</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Custom_Notification.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>Receipents</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Account Creation approval</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>Please not that the new Case and new Account have been approved</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Notify_owner_on_creation</name>
        <label>Notify owner on creation</label>
        <locationX>336</locationX>
        <locationY>2003</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>ownerRecipients</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Case Updated</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>newCaseAssignment</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Queue_Notify_owner_on_creation</name>
        <label>Queue Notify owner on creation</label>
        <locationX>1040</locationX>
        <locationY>2411</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>ownerRecipients</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Case Updated</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>newCaseAssignment</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Queue_send_assignment_email</name>
        <label>Queue send assignment email</label>
        <locationX>776</locationX>
        <locationY>2411</locationY>
        <actionName>ECSS_SendEscalationEmails</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseObj</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>EmailList</name>
            <value>
                <elementReference>ownerRecipients</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>EmailTemplateId</name>
            <value>
                <elementReference>Get_Assignment_Email_Template.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_SendEscalationEmails</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Assignment_Email</name>
        <label>Send Assignment Email</label>
        <locationX>72</locationX>
        <locationY>2003</locationY>
        <actionName>ECSS_SendEscalationEmails</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseObj</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>Email</name>
            <value>
                <elementReference>$Record.Owner:User.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>EmailTemplateId</name>
            <value>
                <elementReference>Get_Assignment_Email_Template.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_SendEscalationEmails</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Email</name>
        <label>Send Email</label>
        <locationX>3031</locationX>
        <locationY>2303</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Check_SMS</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>Copy_1_of_getOrgWideAddress.Address</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailTemplateId</name>
            <value>
                <elementReference>Get_Email_Template_Id.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientId</name>
            <value>
                <elementReference>ContactIdEmail</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>relatedRecordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>logEmailOnSend</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_SMS</name>
        <label>Send SMS</label>
        <locationX>3328</locationX>
        <locationY>3011</locationY>
        <actionName>ECSS_SMSIntegration</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>isArabic</name>
            <value>
                <elementReference>isArabicMssg</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>message</name>
            <value>
                <elementReference>messageText</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>mobilePhones</name>
            <value>
                <elementReference>mobilePhoneList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>smsMtd</name>
            <value>
                <elementReference>Get_SMS_Metadata</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_SMSIntegration</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_SMS_update</name>
        <label>Send SMS update</label>
        <locationX>1821</locationX>
        <locationY>6791</locationY>
        <actionName>ECSS_SMSIntegration</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>toTriggerSLA</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>isArabic</name>
            <value>
                <elementReference>isArabicMssg</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>message</name>
            <value>
                <elementReference>messageTextUpdate</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>mobilePhones</name>
            <value>
                <elementReference>mobilePhoneList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>smsMtd</name>
            <value>
                <elementReference>Get_SMS_Metadata2</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_SMSIntegration</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>SF_Notify_Owner</name>
        <label>SF Notify Owner</label>
        <locationX>50</locationX>
        <locationY>1679</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <connector>
            <targetReference>Copy_1_of_IsGeneralServiceCase</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Custom_Notification.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>ownerRecpientIds</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>New Case Assignment</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>newCaseAssignment</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <apiVersion>61.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>add_MobilePhone</name>
        <label>add MobilePhone</label>
        <locationX>1821</locationX>
        <locationY>6683</locationY>
        <assignmentItems>
            <assignToReference>mobilePhoneList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Contact.MobilePhone</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_SMS_update</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Complaint_Aldar_Gift_Card</name>
        <label>Assign Complaint/Aldar Gift Card</label>
        <locationX>2085</locationX>
        <locationY>6275</locationY>
        <assignmentItems>
            <assignToReference>messageTextUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>messageComplaintAldar</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>To_add_gift_card</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Complaint_Message</name>
        <label>Assign Complaint Message</label>
        <locationX>3328</locationX>
        <locationY>2603</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>complaintMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Complaint_Provis</name>
        <label>Assign Complaint Provis</label>
        <locationX>1821</locationX>
        <locationY>6275</locationY>
        <assignmentItems>
            <assignToReference>messageTextUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_SMS_Complaint_Provis</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maintenance</name>
        <label>Assign Maintenance</label>
        <locationX>3064</locationX>
        <locationY>2603</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MaintenanceMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maintenance_Abu_Dhabi_Message</name>
        <label>Assign Maintenance Abu Dhabi Message</label>
        <locationX>2800</locationX>
        <locationY>2603</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MaintenanceAbuDhabi</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maintenance_Abu_Dhabi_MessageUpdate</name>
        <label>Assign Maintenance/Abu Dhabi Message</label>
        <locationX>1557</locationX>
        <locationY>6275</locationY>
        <assignmentItems>
            <assignToReference>messageTextUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MaintenanceAbuDabiUpdate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ToAddISMSCategoryArabic1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maintenance_Message</name>
        <label>Assign Maintenance Message</label>
        <locationX>1293</locationX>
        <locationY>6275</locationY>
        <assignmentItems>
            <assignToReference>messageTextUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>MaintnanceUpdate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ToAddISMSCategory</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_MobilePhones</name>
        <label>Assign MobilePhones</label>
        <locationX>3328</locationX>
        <locationY>2903</locationY>
        <assignmentItems>
            <assignToReference>mobilePhoneList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Contact.MobilePhone</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_SMS</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Owner_Queue_to_Collection</name>
        <label>Assign Owner Queue to Collection</label>
        <locationX>842</locationX>
        <locationY>2003</locationY>
        <assignmentItems>
            <assignToReference>ownerRecipients</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_on_Queue_Users.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ownerRecpientIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_on_Queue_Users.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_on_Queue_Users</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Owner_to_Collection</name>
        <label>Assign Owner to Collection</label>
        <locationX>50</locationX>
        <locationY>1571</locationY>
        <assignmentItems>
            <assignToReference>ownerRecipients</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Owner:User.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ownerRecpientIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SF_Notify_Owner</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Receipents</name>
        <label>Assign Receipents</label>
        <locationX>2536</locationX>
        <locationY>539</locationY>
        <assignmentItems>
            <assignToReference>Receipents</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Type_of_Change</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Recpients_Emails</name>
        <label>Assign Recpients Emails</label>
        <locationX>1821</locationX>
        <locationY>4535</locationY>
        <assignmentItems>
            <assignToReference>emailAdressCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Contact.Email</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ECSS_CaseEmailTemplateAssignment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assignNewNumberOfCallOuts</name>
        <label>assignNewNumberOfCallOuts</label>
        <locationX>1975</locationX>
        <locationY>8399</locationY>
        <assignmentItems>
            <assignToReference>get_Related_Contract.ECSS_Consumed_Call_Outs__c</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Contract</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Complaint_Provis</name>
        <label>Copy 1 of Assign Complaint Provis</label>
        <locationX>3592</locationX>
        <locationY>2603</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>{!$Label.ECSS_Provis_Resolved_SMS}</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Provis_Khidmah_Entitlement</name>
        <label>Copy 1 of Assign Provis/Khidmah Entitlement</label>
        <locationX>1854</locationX>
        <locationY>7283</locationY>
        <assignmentItems>
            <assignToReference>entitlementId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Entitlement_Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_Update_Entitlement_on_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Retail_1_Entitlement</name>
        <label>Copy 1 of Assign Retail 1 Entitlement</label>
        <locationX>2118</locationX>
        <locationY>7283</locationY>
        <assignmentItems>
            <assignToReference>entitlementId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Retail_1_Entitlement_Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_Update_Entitlement_on_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Retail_2_Entitlement</name>
        <label>Copy 1 of Assign Retail 2 Entitlement</label>
        <locationX>2382</locationX>
        <locationY>7283</locationY>
        <assignmentItems>
            <assignToReference>entitlementId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Retail_2_Entitlement_Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_Update_Entitlement_on_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_toAssignAddNameWithCategory</name>
        <label>Copy 1 of toAssignAddNameWithCategory</label>
        <locationX>2833</locationX>
        <locationY>1703</locationY>
        <assignmentItems>
            <assignToReference>addName1</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_Get_Category_Email_Mdt.Customer_Email__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_getOrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_toAssignAddNameWithCompany</name>
        <label>Copy 1 of toAssignAddNameWithCompany</label>
        <locationX>3097</locationX>
        <locationY>1919</locationY>
        <assignmentItems>
            <assignToReference>addName1</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_Get_Company_Email_Mdt.Customer_Email__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_getOrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_toAssignAddNameWithDefault</name>
        <label>Copy 1 of toAssignAddNameWithDefault</label>
        <locationX>3361</locationX>
        <locationY>1919</locationY>
        <assignmentItems>
            <assignToReference>addName1</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Org_Wide</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_getOrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>To_add_gift_card</name>
        <label>To add gift card</label>
        <locationX>2085</locationX>
        <locationY>6383</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>to_Assign_Payment_Receipents</name>
        <label>to  Assign Payment Receipents</label>
        <locationX>1568</locationX>
        <locationY>755</locationY>
        <assignmentItems>
            <assignToReference>RecpientsEmails</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>samgad@cloudzlab.com</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Email_On_Payment_Completion</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ToAddISMSCategory</name>
        <label>ToAddISMSCategory</label>
        <locationX>1293</locationX>
        <locationY>6383</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ToAddISMSCategoryArabic1</name>
        <label>ToAddISMSCategoryArabic</label>
        <locationX>1557</locationX>
        <locationY>6383</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignAddNameWithCategory</name>
        <label>toAssignAddNameWithCategory</label>
        <locationX>1326</locationX>
        <locationY>5183</locationY>
        <assignmentItems>
            <assignToReference>addName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Category_Email_Mdt.Customer_Email__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>getOrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignAddNameWithCompany</name>
        <label>toAssignAddNameWithCompany</label>
        <locationX>1590</locationX>
        <locationY>5399</locationY>
        <assignmentItems>
            <assignToReference>addName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Company_Email_Mdt.Customer_Email__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>getOrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignAddNameWithDefault</name>
        <label>toAssignAddNameWithDefault</label>
        <locationX>1854</locationX>
        <locationY>5399</locationY>
        <assignmentItems>
            <assignToReference>addName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Org_Wide</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>getOrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignCaseContact</name>
        <label>toAssignCaseContact</label>
        <locationX>3416</locationX>
        <locationY>1187</locationY>
        <assignmentItems>
            <assignToReference>ContactIdEmail</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ContactId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Email_Template_Found</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignContactWithNew</name>
        <label>toAssignContactWithNew</label>
        <locationX>2151</locationX>
        <locationY>3827</locationY>
        <assignmentItems>
            <assignToReference>$Record.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ECSS_NewContactRelationship__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignExistingContact</name>
        <label>toAssignExistingContact</label>
        <locationX>2415</locationX>
        <locationY>3719</locationY>
        <assignmentItems>
            <assignToReference>$Record.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ECSS_contactIdSelected__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignGenericCase</name>
        <label>toAssignGenericCase</label>
        <locationX>666</locationX>
        <locationY>971</locationY>
        <assignmentItems>
            <assignToReference>ECSSCaseAssign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Email_Template_Name_from_Metdata.Assignment_Email_Template__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Assignment_Email_Template</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignKHCaseMdt</name>
        <label>toAssignKHCaseMdt</label>
        <locationX>402</locationX>
        <locationY>971</locationY>
        <assignmentItems>
            <assignToReference>ECSSCaseAssign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Email_Template_Name_from_Metdata_KH.Assignment_Email_Template__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Assignment_Email_Template</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignOrganizationContact</name>
        <label>toAssignOrganizationContact</label>
        <locationX>1623</locationX>
        <locationY>3935</locationY>
        <assignmentItems>
            <assignToReference>$Record.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Create_Contact</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>toCreateOrganizatoinContactAccountUnit</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignPersonContact</name>
        <label>toAssignPersonContact</label>
        <locationX>1887</locationX>
        <locationY>3935</locationY>
        <assignmentItems>
            <assignToReference>$Record.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Create_Contact_Person</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>toCreatePersonContactAccountUnit</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignRecordContact</name>
        <label>toAssignRecordContact</label>
        <locationX>2085</locationX>
        <locationY>3419</locationY>
        <assignmentItems>
            <assignToReference>$Record.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.PersonContactId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>toCheckContactCreation</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignRetailCaseMdt</name>
        <label>toAssignRetailCaseMdt</label>
        <locationX>138</locationX>
        <locationY>971</locationY>
        <assignmentItems>
            <assignToReference>ECSSCaseAssign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Email_Template_Retail_Name_from_Metdata.Assignment_Email_Template__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Assignment_Email_Template</targetReference>
        </connector>
    </assignments>
    <customErrors>
        <name>ErrorForPasspAndEmiratesId</name>
        <label>ErrorForPasspAndEmiratesId</label>
        <locationX>1832</locationX>
        <locationY>971</locationY>
        <connector>
            <targetReference>Update_Related_Acc_Status</targetReference>
        </connector>
        <customErrorMessages>
            <errorMessage>You have to either fill the Emirates Id or the Passport Number</errorMessage>
            <fieldSelection>ECSS_RequestedEmiratesId__c</fieldSelection>
            <isFieldError>true</isFieldError>
        </customErrorMessages>
        <customErrorMessages>
            <errorMessage>You have to either fill the Emirates Id or the Passport Number</errorMessage>
            <fieldSelection>ECSS_RequestedPassportNo__c</fieldSelection>
            <isFieldError>true</isFieldError>
        </customErrorMessages>
    </customErrors>
    <decisions>
        <name>Assignment_Email_Template_Found</name>
        <label>Assignment Email Template Found</label>
        <locationX>204</locationX>
        <locationY>1895</locationY>
        <defaultConnector>
            <targetReference>Notify_owner_on_creation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>email_template_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Assignment_Email_Template</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Assignment_Email</targetReference>
            </connector>
            <label>email template not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Assignment_Email_Template_Found_Queue</name>
        <label>Assignment Email Template Found Queue</label>
        <locationX>908</locationX>
        <locationY>2303</locationY>
        <defaultConnector>
            <targetReference>Queue_Notify_owner_on_creation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Email_template_not_null_Queue</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Assignment_Email_Template</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Queue_send_assignment_email</targetReference>
            </connector>
            <label>Email template not null Queue</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Account_Type</name>
        <label>Check Account Type</label>
        <locationX>1755</locationX>
        <locationY>3719</locationY>
        <defaultConnector>
            <targetReference>Create_Contact_Person</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Organization</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.RecordType.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Organization</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Contact</targetReference>
            </connector>
            <label>Organization</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Approval_Rejection</name>
        <label>Check Approval / Rejection</label>
        <locationX>2118</locationX>
        <locationY>755</locationY>
        <defaultConnector>
            <targetReference>Update_Rejected_Account_Status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Approval</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_emirates_and_passport</targetReference>
            </connector>
            <label>Approval</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_emirates_and_passport</name>
        <label>Check emirates and passport</label>
        <locationX>1964</locationX>
        <locationY>863</locationY>
        <defaultConnector>
            <targetReference>Update_Related_Acc_Status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Do_not_exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_RequestedEmiratesId__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_RequestedPassportNo__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ErrorForPasspAndEmiratesId</targetReference>
            </connector>
            <label>Do not exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_SMS</name>
        <label>Check for SMS</label>
        <locationX>1821</locationX>
        <locationY>6167</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>toTriggerSLA</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Maintenance_Abu_Dubai</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.ECSS_ABU_DHABI_POLICE_GHQ__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IFM / Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maintenance_Message</targetReference>
            </connector>
            <label>Maintenance</label>
        </rules>
        <rules>
            <name>Maintenace_Abu_Dhabi</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.ECSS_ABU_DHABI_POLICE_GHQ__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IFM / Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maintenance_Abu_Dhabi_MessageUpdate</targetReference>
            </connector>
            <label>Maintenace/Abu Dhabi</label>
        </rules>
        <rules>
            <name>Complaint_Provis</name>
            <conditionLogic>2 and (1 or 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Inquiry</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Complaint_Provis</targetReference>
            </connector>
            <label>Complaint/Provis</label>
        </rules>
        <rules>
            <name>Complaint_Aldar_Gift_Card1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Aldar Gift Card</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Complaint_Aldar_Gift_Card</targetReference>
            </connector>
            <label>Complaint/Aldar Gift Card</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_on_priority</name>
        <label>Check on priority</label>
        <locationX>2305</locationX>
        <locationY>7775</locationY>
        <defaultConnector>
            <targetReference>decisionToCheckMaintenanceTriggeringAction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>P1_Priority</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_NotificationNumber__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>P1</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.ECSS_NotificationNumber__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>P1_Callout_Task_Creation</targetReference>
            </connector>
            <label>P1 Priority</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_retail_subvertical_options</name>
        <label>Check retail subvertical options</label>
        <locationX>402</locationX>
        <locationY>755</locationY>
        <defaultConnector>
            <targetReference>get_Email_Template_Name_from_Metdata</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Retail_options</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yas Mall</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Jimi Mall</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>WTC Mall</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Email_Template_Retail_Name_from_Metdata</targetReference>
            </connector>
            <label>Retail options</label>
        </rules>
        <rules>
            <name>KhidmahHomeTemplate</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Object_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Email_Template_Name_from_Metdata_KH</targetReference>
            </connector>
            <label>KhidmahHomeTemplate</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_SMS</name>
        <label>Check SMS</label>
        <locationX>3328</locationX>
        <locationY>2495</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>decisionToCheckCaseType</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Maintenance_Abu_Dhabi</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.ECSS_ABU_DHABI_POLICE_GHQ__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IFM / Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maintenance_Abu_Dhabi_Message</targetReference>
            </connector>
            <label>Maintenance/Abu Dhabi</label>
        </rules>
        <rules>
            <name>Maintenance</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.ECSS_ABU_DHABI_POLICE_GHQ__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IFM / Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maintenance</targetReference>
            </connector>
            <label>Maintenance</label>
        </rules>
        <rules>
            <name>Complaint_Aldar_Gift_Card</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Aldar Gift Card</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Complaint_Message</targetReference>
            </connector>
            <label>Complaint Aldar Gift Card</label>
        </rules>
        <rules>
            <name>Complaint_Provisu</name>
            <conditionLogic>2 and (1 or 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Inquiry</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assign_Complaint_Provis</targetReference>
            </connector>
            <label>Complaint/Provis</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Template_Id</name>
        <label>Check Template Id</label>
        <locationX>1821</locationX>
        <locationY>4859</locationY>
        <defaultConnector>
            <targetReference>Check_for_SMS</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Id_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Email_Template_for_Case_Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Category_Email_Mdt</targetReference>
            </connector>
            <label>Id not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_Choose_Entitlement</name>
        <label>Copy 1 of Choose Entitlement</label>
        <locationX>2250</locationX>
        <locationY>7175</locationY>
        <defaultConnector>
            <targetReference>Copy_1_of_Update_Entitlement_on_Case</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_Provis_Khidmah</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assign_Provis_Khidmah_Entitlement</targetReference>
            </connector>
            <label>Copy 1 of Provis/Khidmah</label>
        </rules>
        <rules>
            <name>Copy_1_of_Retail_30min_4Hr</name>
            <conditionLogic>1 AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retail</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-30-MIN</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-4-HOURS</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assign_Retail_1_Entitlement</targetReference>
            </connector>
            <label>Copy 1 of Retail 30min/4Hr</label>
        </rules>
        <rules>
            <name>Copy_1_of_Retail_24_48_120hrs</name>
            <conditionLogic>1 AND (2 OR 3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retail</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-24-HOURS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-48-HOURS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-120-HOURS</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assign_Retail_2_Entitlement</targetReference>
            </connector>
            <label>Copy 1 of Retail (24,48,120hrs)</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_IsGeneralServiceCase</name>
        <label>IsGeneralServiceCase</label>
        <locationX>50</locationX>
        <locationY>1787</locationY>
        <defaultConnector>
            <targetReference>Assignment_Email_Template_Found</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>if no</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_if_yes</name>
            <conditionLogic>(1 AND 2 AND ( 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 14) AND (11 OR 12) AND (13 OR 15))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pet Registration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Card</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Booking</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Common Area Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NOC for Unit modifications</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Out of home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management/OA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Integration Profile</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OA Community Manager</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Asset.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS Unit</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tenant Onboarding</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>toCheckIfEmailNeeded</targetReference>
            </connector>
            <label>if yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_toCheckCategoryEmailExists</name>
        <label>Copy 1 of toCheckCategoryEmailExists</label>
        <locationX>3031</locationX>
        <locationY>1595</locationY>
        <defaultConnector>
            <targetReference>Copy_1_of_Get_Company_Email_Mdt</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_Category_Email_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Copy_1_of_Get_Category_Email_Mdt</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_toAssignAddNameWithCategory</targetReference>
            </connector>
            <label>Copy 1 of Category Email Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_toCheckCompanyEmailEscalationMDtExists</name>
        <label>Copy 1 of toCheckCompanyEmailEscalationMDtExists</label>
        <locationX>3229</locationX>
        <locationY>1811</locationY>
        <defaultConnector>
            <targetReference>Copy_1_of_toAssignAddNameWithDefault</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_Company_Email_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Copy_1_of_Get_Company_Email_Mdt</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_toAssignAddNameWithCompany</targetReference>
            </connector>
            <label>Copy 1 of Company Email Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_2_of_IsGeneralServiceCase</name>
        <label>IsGeneralServiceCase</label>
        <locationX>1524</locationX>
        <locationY>5783</locationY>
        <defaultConnector>
            <targetReference>Case_Creation_Registration_Email</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>if no</defaultConnectorLabel>
        <rules>
            <name>Copy_2_of_if_yes</name>
            <conditionLogic>(1 AND 2 AND ( 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 14) AND (11 OR 12) AND (13 OR 15))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pet Registration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Card</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Booking</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Common Area Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NOC for Unit modifications</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Out of home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management/OA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Integration Profile</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OA Community Manager</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Asset.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS Unit</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tenant Onboarding</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>Check_for_SMS</targetReference>
            </connector>
            <label>if yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>decisionToCheckCaseHistoryAndContractDetails</name>
        <label>decisionToCheckCaseHistoryAndContractDetails</label>
        <locationX>2107</locationX>
        <locationY>8183</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>firstClosureAndContractDetailsExists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Callout_Deducted__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Contract_Details_Id__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Is_Chargeable__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Related_Contract</targetReference>
            </connector>
            <label>firstClosureAndContractDetailsExists</label>
        </rules>
    </decisions>
    <decisions>
        <name>decisionToCheckCaseType</name>
        <label>decisionToCheckCaseType</label>
        <locationX>2536</locationX>
        <locationY>7667</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>isMaintenance</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_on_priority</targetReference>
            </connector>
            <label>isMaintenance</label>
        </rules>
    </decisions>
    <decisions>
        <name>decisionToCheckMaintenanceTriggeringAction</name>
        <label>decisionToCheckMaintenanceTriggeringAction</label>
        <locationX>2305</locationX>
        <locationY>8075</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>isCaseClosed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsClosed</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>decisionToCheckCaseHistoryAndContractDetails</targetReference>
            </connector>
            <label>isCaseClosed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Email_Template_Found</name>
        <label>Email Template Found</label>
        <locationX>3328</locationX>
        <locationY>1379</locationY>
        <defaultConnector>
            <targetReference>Check_SMS</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>not_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Email_Template_Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contact.Email</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Get_Category_Email_Mdt</targetReference>
            </connector>
            <label>Not Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsGeneralServiceCase</name>
        <label>IsGeneralServiceCase</label>
        <locationX>754</locationX>
        <locationY>2195</locationY>
        <defaultConnector>
            <targetReference>Assignment_Email_Template_Found_Queue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>if no</defaultConnectorLabel>
        <rules>
            <name>if_yes</name>
            <conditionLogic>(1 AND 2 AND ( 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 14) AND (11 OR 12) AND (13 OR 15))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pet Registration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Card</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Booking</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Common Area Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NOC for Unit modifications</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Out of home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management/OA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Integration Profile</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OA Community Manager</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Asset.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS Unit</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tenant Onboarding</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>toCheckIfEmailNeeded</targetReference>
            </connector>
            <label>if yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>To_check_User_or_Queue</name>
        <label>To check User or Queue</label>
        <locationX>402</locationX>
        <locationY>1463</locationY>
        <defaultConnector>
            <targetReference>Get_Queue_Members</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>User</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner:User.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Owner_to_Collection</targetReference>
            </connector>
            <label>User</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckAcc</name>
        <label>toCheckAcc</label>
        <locationX>2217</locationX>
        <locationY>3311</locationY>
        <defaultConnector>
            <targetReference>toCheckContactCreation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>personAcc</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.IsPersonAccount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toAssignRecordContact</targetReference>
            </connector>
            <label>personAcc</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckCategoryEmailExists</name>
        <label>toCheckCategoryEmailExists</label>
        <locationX>1524</locationX>
        <locationY>5075</locationY>
        <defaultConnector>
            <targetReference>Get_Company_Email_Mdt</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Category_Email_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Category_Email_Mdt</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toAssignAddNameWithCategory</targetReference>
            </connector>
            <label>Category Email Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckCompanyEmailEscalationMDtExists</name>
        <label>toCheckCompanyEmailEscalationMDtExists</label>
        <locationX>1722</locationX>
        <locationY>5291</locationY>
        <defaultConnector>
            <targetReference>toAssignAddNameWithDefault</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Company_Email_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Company_Email_Mdt</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toAssignAddNameWithCompany</targetReference>
            </connector>
            <label>Company Email Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckContactCreation</name>
        <label>toCheckContactCreation</label>
        <locationX>2217</locationX>
        <locationY>3611</locationY>
        <defaultConnector>
            <targetReference>Update_Case</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ContactCreationNeeded</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_NewContactLastName__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Account_Type</targetReference>
            </connector>
            <label>ContactCreationNeeded</label>
        </rules>
        <rules>
            <name>ContactRelationShipNeeded</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_NewContactRelationship__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toCreateContactAccountUnitIpd</targetReference>
            </connector>
            <label>ContactRelationShipNeeded</label>
        </rules>
        <rules>
            <name>ECSS_contactIdSelected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_contactIdSelected__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toAssignExistingContact</targetReference>
            </connector>
            <label>ECSS_contactIdSelected</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckContactEmail</name>
        <label>toCheckContactEmail</label>
        <locationX>2217</locationX>
        <locationY>4427</locationY>
        <defaultConnector>
            <targetReference>toTriggerSLA</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ContactEmail_there</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contact.Email</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Recpients_Emails</targetReference>
            </connector>
            <label>ContactEmail there</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckContactValue</name>
        <label>toCheckContactValue</label>
        <locationX>3328</locationX>
        <locationY>1079</locationY>
        <defaultConnector>
            <targetReference>toAssignCaseContact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Contact_Not_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Email_Template_Found</targetReference>
            </connector>
            <label>Contact Not Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckECSSRecordType</name>
        <label>toCheckECSSRecordType</label>
        <locationX>3680</locationX>
        <locationY>323</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ECSS_RecordType</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>$Label.ECSS_Label</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Custom_Notification</targetReference>
            </connector>
            <label>ECSS RecordType</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckIfEmailNeeded</name>
        <label>toCheckIfEmailNeeded</label>
        <locationX>2536</locationX>
        <locationY>3203</locationY>
        <defaultConnector>
            <targetReference>toTriggerSLA</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>EmailtoCustomerNeeded</name>
            <conditionLogic>(1 OR 2 OR 3 OR 4 OR 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Sub_Category_Text__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toCheckAcc</targetReference>
            </connector>
            <label>EmailtoCustomerNeeded</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckTypenotEmail</name>
        <label>toCheckTypenotEmail</label>
        <locationX>402</locationX>
        <locationY>1271</locationY>
        <defaultConnector>
            <targetReference>To_check_User_or_Queue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>notEmailCheck</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Label.ECSS_Email_RecType_DevName</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>To_check_User_or_Queue</targetReference>
            </connector>
            <label>notEmailCheck</label>
        </rules>
    </decisions>
    <decisions>
        <name>toTriggerSLA</name>
        <label>toTriggerSLA</label>
        <locationX>2536</locationX>
        <locationY>7067</locationY>
        <defaultConnector>
            <targetReference>decisionToCheckCaseType</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>triggerSLA</name>
            <conditionLogic>(1 OR 2 OR 3 OR 4 OR 5 OR 7) AND 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Sub_Category_Text__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Object_Category__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.EntitlementId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Choose_Entitlement</targetReference>
            </connector>
            <label>triggerSLA</label>
        </rules>
    </decisions>
    <decisions>
        <name>Type_of_Change</name>
        <label>Type of Change</label>
        <locationX>2536</locationX>
        <locationY>647</locationY>
        <defaultConnector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Id_Changed</name>
            <conditionLogic>(1 AND 2) OR (3 AND( 4 OR 5 OR 6 OR 7))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.OwnerId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Object_Category__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Sub_Category_Text__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_retail_subvertical_options</targetReference>
            </connector>
            <label>Id Changed</label>
        </rules>
        <rules>
            <name>Customer_Documents_Uploaded</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Customer_Documents_Uploaded__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Customer_Documents_Uploaded__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notify_Case_Owner</targetReference>
            </connector>
            <label>Customer Documents Uploaded</label>
        </rules>
        <rules>
            <name>Payment_Status_Changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Payment_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Payment Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Payment_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>to_Assign_Payment_Receipents</targetReference>
            </connector>
            <label>Payment Status Changed</label>
        </rules>
        <rules>
            <name>Account_Request_Approval</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>$GlobalConstant.True</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Approval_Rejection</targetReference>
            </connector>
            <label>Account Request Approval</label>
        </rules>
        <rules>
            <name>Case_Account_Creation</name>
            <conditionLogic>(1 AND 2 AND 3 AND 4) OR (5 AND 6)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_NotificationNumber__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.ECSS_NotificationNumber__c</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Account_Contract_Request__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Approval_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ECSS_Subflow_to_unlock_Emergency_Case</targetReference>
            </connector>
            <label>Case Account Creation</label>
        </rules>
        <rules>
            <name>Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Case_Milestones</targetReference>
            </connector>
            <label>Completed</label>
        </rules>
        <rules>
            <name>Cat_SubCat_ObjectCat_SubVertical_Changed_Maintenance</name>
            <conditionLogic>(1 OR 2 OR 3 OR 4) AND 5 AND 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Object_Category__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Sub_Category__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CaseSAPExternalId__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Approved_False</targetReference>
            </connector>
            <label>Cat/SubCat/ObjectCat/SubVertical Changed - Maintenance</label>
        </rules>
        <rules>
            <name>Entitlement_Id</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.EntitlementId</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SlaStartDate</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Case_Milestones</targetReference>
            </connector>
            <label>Entitlement Id</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>CaseCountryCode</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!$Record.ECSS_CompanyOptions__c},&apos;Provis&apos;),&apos;770&apos;
     ,&apos;880&apos;
)</expression>
    </formulas>
    <formulas>
        <name>caseSubject</name>
        <dataType>String</dataType>
        <expression>IF(
   $Record.Recordtype_Name__c != $Label.ECSS_Email_RecType_DevName,
   
   IF(
    OR( IsPickval({!$Record.CaseCategory__c},&apos;Khidmah Home&apos;),IsPickval({!$Record.CaseCategory__c},&apos;Inspire Home&apos;)),
     &apos;Inspire Home&apos;,
     IF(
       IsPickval({!$Record.CaseCategory__c},&apos;IFM / Khidmah Home&apos;),
       &apos;IFM / Inspire Home&apos;, IF(  IsPickval({!$Record.CaseCategory__c},&apos;IFM/ Khidmah Home&apos;),  &apos;IFM/ Inspire Home&apos;,
Text({!$Record.CaseCategory__c})  )   )
   ) 
   &amp; &apos;|&apos; &amp; $Record.ECSS_Sub_Category_Text__c &amp; &apos;|&apos; &amp; $Record.CaseNumber,
   
   LEFT($Record.CaseNumber &amp; &apos;| &apos; &amp; $Record.Subject,250)
)</expression>
    </formulas>
    <formulas>
        <name>complaintMessage</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE({!$Label.ECSS_SMS_Complaint_Completed_Aldar_Gift_Card},&apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber}),&apos;&lt;Customer Name&gt;&apos;,{!$Record.ECSS_Account_Name__c})</expression>
    </formulas>
    <formulas>
        <name>ConcatedPhoneNumber</name>
        <dataType>String</dataType>
        <expression>{!$Record.ECSS_NewContactCountryCode__c}+{!$Record.ECSS_NewContactMobileNumber__c}</expression>
    </formulas>
    <formulas>
        <name>DateTime</name>
        <dataType>DateTime</dataType>
        <expression>{!$Flow.CurrentDateTime} + (1/24)</expression>
    </formulas>
    <formulas>
        <name>MaintenanceAbuDabiUpdate</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!$Label.ECSS_SMS_Maintenance_Khidmah_Home_AR}, &apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber})</expression>
    </formulas>
    <formulas>
        <name>MaintenanceAbuDhabi</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!$Label.ECSS_SMS_Maintenance_Completed_Khidmah_Home_AR},&apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber})</expression>
    </formulas>
    <formulas>
        <name>MaintenanceMessage</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE({!$Label.ECSS_SMS_Maintenance_Completed_Khimdah_Home},&apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber}),&apos;&lt;Ticket Description&gt;&apos;,{!$Record.Subject})</expression>
    </formulas>
    <formulas>
        <name>MaintnanceUpdate</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!$Label.ECSS_SMS_Maintenance_Khidmah_Home},&apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber})</expression>
    </formulas>
    <formulas>
        <name>messageComplaintAldar</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE({!$Label.ECSS_SMS_Complaint_Aldar_Gift_Card}, &apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber}),&apos;&lt;Customer Name&gt;&apos;,{!$Record.ECSS_Account_Name__c})</expression>
    </formulas>
    <formulas>
        <name>ownerCase</name>
        <dataType>String</dataType>
        <expression>{!$Record.Owner:User.FirstName} + &apos; &apos; +{!$Record.Owner:User.LastName}</expression>
    </formulas>
    <formulas>
        <name>TypeName</name>
        <dataType>String</dataType>
        <expression>IF(
    BEGINS({!$Record.RecordType.Name}, &quot;ECSS &quot;),
    MID({!$Record.RecordType.Name}, 6, LEN({!$Record.RecordType.Name})),
    {!$Record.RecordType.Name}
)</expression>
    </formulas>
    <interviewLabel>ECSS_Case: On Update {!$Flow.CurrentDateTime}</interviewLabel>
    <label>ECSS_Case: On Update</label>
    <loops>
        <name>Loop_on_Queue_Users</name>
        <label>Loop on Queue Users</label>
        <locationX>754</locationX>
        <locationY>1895</locationY>
        <collectionReference>Get_Queue_Users</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Owner_Queue_to_Collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>IsGeneralServiceCase</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Contact</name>
        <label>Create Contact</label>
        <locationX>1623</locationX>
        <locationY>3827</locationY>
        <connector>
            <targetReference>toAssignOrganizationContact</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Email</field>
            <value>
                <elementReference>$Record.NewContactEmail__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FirstName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactFirstName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactLastName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobileCountryCode__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactCountryCode__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone</field>
            <value>
                <elementReference>ConcatedPhoneNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactMobileNumber__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Contact_Person</name>
        <label>Create Contact</label>
        <locationX>1887</locationX>
        <locationY>3827</locationY>
        <connector>
            <targetReference>toAssignPersonContact</targetReference>
        </connector>
        <inputAssignments>
            <field>Email</field>
            <value>
                <elementReference>$Record.NewContactEmail__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FirstName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactFirstName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactLastName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobileCountryCode__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactCountryCode__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone</field>
            <value>
                <elementReference>ConcatedPhoneNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactMobileNumber__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>P1_Callout_Task_Creation</name>
        <label>P1 Callout Task Creation</label>
        <locationX>2173</locationX>
        <locationY>7883</locationY>
        <connector>
            <targetReference>decisionToCheckMaintenanceTriggeringAction</targetReference>
        </connector>
        <inputAssignments>
            <field>ActivityDate</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_CaseCountryCode__c</field>
            <value>
                <elementReference>CaseCountryCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_CaseMobileNumber__c</field>
            <value>
                <elementReference>$Record.ContactMobile</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_DueDateTime__c</field>
            <value>
                <elementReference>DateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_P1Check__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>First_Name__c</field>
            <value>
                <stringValue>P1 Callout</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Callback</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>Callback</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>toCreateContactAccountUnitIpd</name>
        <label>toCreateContactAccountUnitUpd</label>
        <locationX>2151</locationX>
        <locationY>3719</locationY>
        <connector>
            <targetReference>toAssignContactWithNew</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>$Record.AssetId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactRelationship__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact_Account_Unit__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>toCreateOrganizatoinContactAccountUnit</name>
        <label>toCreateOrganizatoinContactAccountUnit</label>
        <locationX>1623</locationX>
        <locationY>4043</locationY>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>$Record.AssetId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>Create_Contact</elementReference>
            </value>
        </inputAssignments>
        <object>Contact_Account_Unit__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>toCreatePersonContactAccountUnit</name>
        <label>toCreatePersonContactAccountUnit</label>
        <locationX>1887</locationX>
        <locationY>4043</locationY>
        <connector>
            <targetReference>Update_Case</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>$Record.AssetId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>Create_Contact_Person</elementReference>
            </value>
        </inputAssignments>
        <object>Contact_Account_Unit__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Copy_1_of_Get_Category_Email_Mdt</name>
        <label>Copy 1 of Get Category Email Mdt</label>
        <locationX>3031</locationX>
        <locationY>1487</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_1_of_toCheckCategoryEmailExists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Incident_Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Escalation_Email_Address__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Copy_1_of_Get_Company_Email_Mdt</name>
        <label>Copy 1 of Get Company Email Mdt</label>
        <locationX>3229</locationX>
        <locationY>1703</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_1_of_toCheckCompanyEmailEscalationMDtExists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Company__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ECSS_CompanyOptions__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Escalation_Email_Address__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Copy_1_of_getOrgWideAddress</name>
        <label>Copy 1 of getOrgWideAddress</label>
        <locationX>3031</locationX>
        <locationY>2195</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Send_Email</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Address</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>addName1</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrgWideEmailAddress</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Assignment_Email_Template</name>
        <label>Get Assignment Email Template</label>
        <locationX>402</locationX>
        <locationY>1163</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckTypenotEmail</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>Contains</operator>
            <value>
                <elementReference>ECSSCaseAssign</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailTemplate</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Case_Milestones</name>
        <label>Get Case Milestones</label>
        <locationX>4384</locationX>
        <locationY>755</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Case_Target_Response</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>CaseId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CaseMilestone</object>
        <sortField>TargetResponseInHrs</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Category_Email_Mdt</name>
        <label>Get Category Email Mdt</label>
        <locationX>1524</locationX>
        <locationY>4967</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckCategoryEmailExists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Incident_Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Escalation_Email_Address__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Company_Email_Mdt</name>
        <label>Get Company Email Mdt</label>
        <locationX>1722</locationX>
        <locationY>5183</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckCompanyEmailEscalationMDtExists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Company__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ECSS_CompanyOptions__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Escalation_Email_Address__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Custom_Notification</name>
        <label>Get Custom Notification</label>
        <locationX>2536</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Receipents</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>ECSS_Case_Owner_Notification</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CustomNotificationType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Email_Template_for_Case_Id</name>
        <label>Get Email Template for Case Id</label>
        <locationX>1821</locationX>
        <locationY>4751</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Template_Id</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ECSS_CaseEmailTemplateAssignment.EmailTemplate</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailTemplate</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Email_Template_Id</name>
        <label>Get Email Template Id</label>
        <locationX>3328</locationX>
        <locationY>971</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckContactValue</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Email_Template_Name.EmailTemplate</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailTemplate</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Email_Template_Name_from_Metdata</name>
        <label>get Email Template Name from Metdata</label>
        <locationX>666</locationX>
        <locationY>863</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toAssignGenericCase</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Sub_Vertical__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Email_Template_Name_from_Metdata_KH</name>
        <label>get Email Template Name from Metdata KH</label>
        <locationX>402</locationX>
        <locationY>863</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toAssignKHCaseMdt</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Sub_Vertical__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Khidmah Home</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Email_Template_Retail_Name_from_Metdata</name>
        <label>get Email Template Retail Name from Metdata</label>
        <locationX>138</locationX>
        <locationY>863</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toAssignRetailCaseMdt</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Queue_Members</name>
        <label>Get Queue Members</label>
        <locationX>754</locationX>
        <locationY>1571</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Owner_Ids</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>GroupId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>GroupMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Queue_Users</name>
        <label>Get Queue Users</label>
        <locationX>754</locationX>
        <locationY>1787</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_on_Queue_Users</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>Assign_Owner_Ids</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Related_Contract</name>
        <label>get Related Contract</label>
        <locationX>1975</locationX>
        <locationY>8291</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>assignNewNumberOfCallOuts</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ECSS_Contract__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contract</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_SMS_Metadata</name>
        <label>Get SMS Metadata</label>
        <locationX>3328</locationX>
        <locationY>2795</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_MobilePhones</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SMSCategory</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_SMS_Configuration__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_SMS_Metadata2</name>
        <label>Get SMS Metadata</label>
        <locationX>1821</locationX>
        <locationY>6575</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>add_MobilePhone</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SMSCategory</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_SMS_Configuration__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getOrgWideAddress</name>
        <label>getOrgWideAddress</label>
        <locationX>1524</locationX>
        <locationY>5675</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_2_of_IsGeneralServiceCase</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Address</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>addName</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrgWideEmailAddress</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Case_Approved_False</name>
        <label>Case Approved- False</label>
        <locationX>4120</locationX>
        <locationY>755</locationY>
        <connector>
            <targetReference>Case_Approved_True</targetReference>
        </connector>
        <inputAssignments>
            <field>ECSS_isCaseApproved__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Case_Approved_True</name>
        <label>Case Approved - True</label>
        <locationX>4120</locationX>
        <locationY>863</locationY>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <inputAssignments>
            <field>ECSS_isCaseApproved__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Copy_1_of_Update_Entitlement_on_Case</name>
        <label>Copy 1 of Update Entitlement on Case</label>
        <locationX>2250</locationX>
        <locationY>7475</locationY>
        <connector>
            <targetReference>decisionToCheckCaseType</targetReference>
        </connector>
        <inputAssignments>
            <field>EntitlementId</field>
            <value>
                <elementReference>entitlementId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SlaStartDate</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case</name>
        <label>Update Case</label>
        <locationX>2217</locationX>
        <locationY>4319</locationY>
        <connector>
            <targetReference>toCheckContactEmail</targetReference>
        </connector>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_Approval_Integration_trigger</name>
        <label>Update Case Approval Integration trigger</label>
        <locationX>1964</locationX>
        <locationY>1271</locationY>
        <connector>
            <targetReference>Notify_Case_Owner_of_accCreation</targetReference>
        </connector>
        <inputAssignments>
            <field>ECSS_isCaseApproved__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_Milestones</name>
        <label>Update Case Milestones</label>
        <locationX>3328</locationX>
        <locationY>755</locationY>
        <connector>
            <targetReference>Get_Email_Template_Name</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>CaseId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CompletionDate</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>CaseMilestone</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_Target_Response</name>
        <label>Update Case - Target Response</label>
        <locationX>4384</locationX>
        <locationY>863</locationY>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <inputAssignments>
            <field>ECSS_Total_Resolution_Time__c</field>
            <value>
                <elementReference>Get_Case_Milestones.TargetResponseInHrs</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Contract</name>
        <label>Update Contract</label>
        <locationX>1975</locationX>
        <locationY>8507</locationY>
        <connector>
            <targetReference>updateCaseToCalloutDeducted</targetReference>
        </connector>
        <inputReference>get_Related_Contract</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Rejected_Account_Status</name>
        <label>Update Rejected Account Status</label>
        <locationX>2272</locationX>
        <locationY>863</locationY>
        <connector>
            <targetReference>Copy_1_of_Notify_Case_Owner_of_accCreationRejection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ApprovalStatus__c</field>
            <value>
                <stringValue>Rejected</stringValue>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Related_Acc_Status</name>
        <label>Update Related Acc Status</label>
        <locationX>1964</locationX>
        <locationY>1163</locationY>
        <connector>
            <targetReference>Update_Case_Approval_Integration_trigger</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ApprovalStatus__c</field>
            <value>
                <stringValue>Approved</stringValue>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>updateCaseToCalloutDeducted</name>
        <label>updateCaseToCalloutDeducted</label>
        <locationX>1975</locationX>
        <locationY>8615</locationY>
        <inputAssignments>
            <field>ECSS_Callout_Deducted__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>3554</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>toCheckECSSRecordType</targetReference>
        </connector>
        <object>Case</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>ECSS_Subflow_to_unlock_Emergency_Case</name>
        <label>ECSS_Subflow to unlock Emergency Case</label>
        <locationX>2536</locationX>
        <locationY>755</locationY>
        <connector>
            <targetReference>toCheckIfEmailNeeded</targetReference>
        </connector>
        <flowName>ECSS_Subflow_to_unlock_Emergency_Case</flowName>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <textTemplates>
        <name>newCaseAssignment</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Dear {!$Record.Owner:User.FirstName} {!$Record.Owner:User.LastName} ,
A new Case {!$Record.CaseNumber} has been assigned to you.
The case priority is {!$Record.Priority} .</text>
    </textTemplates>
    <transforms>
        <name>Assign_Owner_Ids</name>
        <label>Assign Owner Ids</label>
        <locationX>754</locationX>
        <locationY>1679</locationY>
        <connector>
            <targetReference>Get_Queue_Users</targetReference>
        </connector>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <scale>0</scale>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <transformValues>
            <transformValueActions>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Get_Queue_Members[$EachItem].UserOrGroupId</elementReference>
                </value>
            </transformValueActions>
        </transformValues>
    </transforms>
    <variables>
        <name>accRec</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>addName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>addName1</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ContactIdEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ECSSCaseAssign</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>emailAdressCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>entitlementId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>isArabicMssg</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>messageText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>messageTextUpdate</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>mobilePhoneList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ownerRecipients</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ownerRecpientIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Receipents</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecpientsEmails</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SMSCategory</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Generic</stringValue>
        </value>
    </variables>
</Flow>
