<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Case_Creation_Registration_Email</name>
        <label>Case Creation Registration Email</label>
        <locationX>594</locationX>
        <locationY>9875</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <elementReference>Get_OrgWideAddress.Address</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>relatedRecordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientId</name>
            <value>
                <elementReference>$Record.ContactId</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>logEmailOnSend</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailTemplateId</name>
            <value>
                <elementReference>Get_Email_Template_Id.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Get_Email_Template_Action</name>
        <label>Get Email Template Action</label>
        <locationX>759</locationX>
        <locationY>8627</locationY>
        <actionName>ECSS_CaseEmailTemplateAssignment</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_Email_Template_Id</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseList</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_CaseEmailTemplateAssignment</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Notify_owner_on_creation</name>
        <label>Notify owner on creation</label>
        <locationX>740</locationX>
        <locationY>5951</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Perform_FCR_EMail</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>ownerRecepients</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>New Case Assignment</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>newCaseAssignment</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Notify_QueueOwner_on_creation</name>
        <label>Notify Queue owner on creation</label>
        <locationX>1884</locationX>
        <locationY>6359</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>Perform_FCR_EMail</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddressesArray</name>
            <value>
                <elementReference>ownerRecepients</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>New Case Assignment</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>newCaseAssignment</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Assignment_Email</name>
        <label>Send Assignment Email</label>
        <locationX>476</locationX>
        <locationY>5951</locationY>
        <actionName>ECSS_SendEscalationEmails</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Perform_FCR_EMail</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseObj</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>Email</name>
            <value>
                <elementReference>$Record.Owner:User.Email</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>EmailTemplateId</name>
            <value>
                <elementReference>get_Assignment_Email_Template_Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_SendEscalationEmails</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Assignment_Email_to_Queue</name>
        <label>Send Assignment Email to Queue</label>
        <locationX>1620</locationX>
        <locationY>6359</locationY>
        <actionName>ECSS_SendEscalationEmails</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Perform_FCR_EMail</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>caseObj</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>EmailList</name>
            <value>
                <elementReference>ownerRecepients</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>EmailTemplateId</name>
            <value>
                <elementReference>get_Assignment_Email_Template_Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_SendEscalationEmails</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_SMS</name>
        <label>Send SMS</label>
        <locationX>1040</locationX>
        <locationY>2963</locationY>
        <actionName>ECSS_SMSIntegration</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Choose_Entitlement</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>isArabic</name>
            <value>
                <elementReference>isArabicMssg</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>message</name>
            <value>
                <elementReference>messageText</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>mobilePhones</name>
            <value>
                <elementReference>mobilePhoneList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>smsMtd</name>
            <value>
                <elementReference>Get_SMS_Metadata</elementReference>
            </value>
        </inputParameters>
        <nameSegment>ECSS_SMSIntegration</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>SF_Notify_Owner</name>
        <label>SF Notify Owner</label>
        <locationX>1128</locationX>
        <locationY>6911</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <connector>
            <targetReference>Check_Approval_Process_needed_On_Case_Creation</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Custom_Notification.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>ownerRecpientIds</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>New Case Assignment</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>newCaseAssignment</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Submit_Created_Case_For_Approval</name>
        <label>Submit Created Case For Approval</label>
        <locationX>886</locationX>
        <locationY>7211</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>Check_P1</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>Non_Existing_Case_Approval</stringValue>
            </value>
        </inputParameters>
        <nameSegment>submit</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Submit_Topup_Contract_approval</name>
        <label>Submit Topup Contract approval</label>
        <locationX>908</locationX>
        <locationY>3479</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <connector>
            <targetReference>Check_Record_Type</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>ECSS_Case_Topup_Approval</stringValue>
            </value>
        </inputParameters>
        <nameSegment>submit</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>61.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>add_MobilePhone</name>
        <label>add MobilePhone</label>
        <locationX>1040</locationX>
        <locationY>2855</locationY>
        <assignmentItems>
            <assignToReference>mobilePhoneList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Contact.MobilePhone</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_SMS</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Case_to_Update</name>
        <label>assign Case to Update</label>
        <locationX>754</locationX>
        <locationY>755</locationY>
        <assignmentItems>
            <assignToReference>updateCaseVal.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updateCaseVal.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Parent.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CheckUnit</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Complaint_Aldar_Gift_Card</name>
        <label>Assign Complaint/Aldar Gift Card</label>
        <locationX>1106</locationX>
        <locationY>2255</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>messageComplaintAldar</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>To_add_gift_card</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Complaint_Provis</name>
        <label>Assign Complaint Provis</label>
        <locationX>842</locationX>
        <locationY>2255</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_SMS_Complaint_Provis</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maintenance_Abu_Dhabi_Message</name>
        <label>Assign Maintenance/Abu Dhabi Message</label>
        <locationX>578</locationX>
        <locationY>2255</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>maintenanceAbuDhabi</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ToAddISMSCategoryArabic</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Maintenance_Message</name>
        <label>Assign Maintenance Message</label>
        <locationX>50</locationX>
        <locationY>2363</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Maintenance</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ToAddISMSCategory</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Owner_Queue_to_Collection</name>
        <label>Assign Owner Queue to Collection</label>
        <locationX>1521</locationX>
        <locationY>5843</locationY>
        <assignmentItems>
            <assignToReference>ownerRecepients</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_on_Queue_Users.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ownerRecpientIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_on_Queue_Users.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_on_Queue_Users</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Owner_to_Collection</name>
        <label>Assign Owner to Collection</label>
        <locationX>289</locationX>
        <locationY>5519</locationY>
        <assignmentItems>
            <assignToReference>ownerRecepients</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Owner:User.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ownerRecpientIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_IsGeneralServicesCase</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_Provis_Khidmah</name>
        <label>assign Provis/Khidmah</label>
        <locationX>644</locationX>
        <locationY>3179</locationY>
        <assignmentItems>
            <assignToReference>entitlementId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Entitlement_Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Case_Approved</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Recpients_Emails</name>
        <label>Assign Recpients Emails</label>
        <locationX>759</locationX>
        <locationY>8519</locationY>
        <assignmentItems>
            <assignToReference>emailAdressCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Record.Contact.Email</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Email_Template_Action</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Retail_1</name>
        <label>Assign Retail 1</label>
        <locationX>908</locationX>
        <locationY>3179</locationY>
        <assignmentItems>
            <assignToReference>entitlementId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Retail_1_Entitlement_Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Case_Approved</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Retail_2</name>
        <label>Assign Retail 2</label>
        <locationX>1172</locationX>
        <locationY>3179</locationY>
        <assignmentItems>
            <assignToReference>entitlementId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Retail_2_Entitlement_Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Case_Approved</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Status_Completed</name>
        <label>Assign Status - Completed</label>
        <locationX>776</locationX>
        <locationY>3779</locationY>
        <assignmentItems>
            <assignToReference>$Record.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sendNoEmailforFCR</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateCase</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Status_In_Progress</name>
        <label>Assign Status - In Progress</label>
        <locationX>1040</locationX>
        <locationY>3779</locationY>
        <assignmentItems>
            <assignToReference>$Record.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>In Progress</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateCase</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assignUnitValue</name>
        <label>assignUnitValue</label>
        <locationX>754</locationX>
        <locationY>1055</locationY>
        <assignmentItems>
            <assignToReference>updateCaseVal.AssetId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Parent.AssetId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updateCaseVal.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Child_Case</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Generic_Khidmah_AddSMS_Category</name>
        <label>Generic Khidmah AddSMS Category</label>
        <locationX>1634</locationX>
        <locationY>2471</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Generic_Khidmah_Cases</name>
        <label>Generic Khidmah Cases</label>
        <locationX>1634</locationX>
        <locationY>2363</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Maintenance</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Generic_Khidmah_AddSMS_Category</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>IFM_Khidmah_Cases</name>
        <label>IFM Khidmah Cases</label>
        <locationX>1370</locationX>
        <locationY>2363</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_InspireHome</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Inspire_Home_Khidmah_AddSMS_Category</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Inspire_Home_Khidmah_AddSMS_Category</name>
        <label>Inspire Home Khidmah AddSMS Category</label>
        <locationX>1370</locationX>
        <locationY>2471</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Inspire Home</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>InspireHome_Maintenance_Assignment</name>
        <label>InspireHome Maintenance Assignment</label>
        <locationX>314</locationX>
        <locationY>2471</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Inspire Home</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>InspireHomeMaintenance</name>
        <label>InspireHomeMaintenance</label>
        <locationX>314</locationX>
        <locationY>2363</locationY>
        <assignmentItems>
            <assignToReference>messageText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_InspireHome</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>InspireHome_Maintenance_Assignment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>To_add_gift_card</name>
        <label>To add gift card</label>
        <locationX>1106</locationX>
        <locationY>2363</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ToAddISMSCategory</name>
        <label>ToAddISMSCategory</label>
        <locationX>50</locationX>
        <locationY>2471</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ToAddISMSCategoryArabic</name>
        <label>ToAddISMSCategoryArabic</label>
        <locationX>578</locationX>
        <locationY>2363</locationY>
        <assignmentItems>
            <assignToReference>SMSCategory</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isArabicMssg</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_SMS_Metadata</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignAddNameWithCategory</name>
        <label>toAssignAddNameWithCategory</label>
        <locationX>264</locationX>
        <locationY>9167</locationY>
        <assignmentItems>
            <assignToReference>AddName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Category_Email_Mdt.Customer_Email__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_OrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignAddNameWithCompany</name>
        <label>toAssignAddNameWithCompany</label>
        <locationX>528</locationX>
        <locationY>9383</locationY>
        <assignmentItems>
            <assignToReference>AddName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Company_Email_Mdt.Customer_Email__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_OrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignAddNameWithDefault</name>
        <label>toAssignAddNameWithDefault</label>
        <locationX>792</locationX>
        <locationY>9383</locationY>
        <assignmentItems>
            <assignToReference>AddName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.ECSS_Org_Wide</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_OrgWideAddress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignCaseMdt</name>
        <label>toAssignCaseMdt</label>
        <locationX>1304</locationX>
        <locationY>4295</locationY>
        <assignmentItems>
            <assignToReference>ECSSCaseAssign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Email_Template_Name_from_Metdata</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>get_Assignment_Email_Template_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignKHMdt</name>
        <label>toAssignKHMdt</label>
        <locationX>1040</locationX>
        <locationY>4295</locationY>
        <assignmentItems>
            <assignToReference>ECSSCaseAssign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Email_Template_Name_from_Metdata_KH</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>get_Assignment_Email_Template_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>toAssignRetailCaseMdt</name>
        <label>toAssignRetailCaseMdt</label>
        <locationX>776</locationX>
        <locationY>4295</locationY>
        <assignmentItems>
            <assignToReference>ECSSCaseAssign</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_Email_Template_Retail_Name_from_Metdata</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>get_Assignment_Email_Template_Record</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_Acc</name>
        <label>Check Acc</label>
        <locationX>886</locationX>
        <locationY>647</locationY>
        <defaultConnector>
            <targetReference>CheckUnit</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Acc_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Case_to_Update</targetReference>
            </connector>
            <label>Acc Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Account_Type</name>
        <label>Check Account Type</label>
        <locationX>578</locationX>
        <locationY>1547</locationY>
        <defaultConnector>
            <targetReference>Create_Contact_Person</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Organization</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Account.RecordType.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Organization</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Contact</targetReference>
            </connector>
            <label>Organization</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Approval_Process_needed_On_Case_Creation</name>
        <label>Check Approval Process needed On Case Creation</label>
        <locationX>1040</locationX>
        <locationY>7103</locationY>
        <defaultConnector>
            <targetReference>toCheckMaintenanceCase</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Approval_Needed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Account_Contract_Request__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Submit_Created_Case_For_Approval</targetReference>
            </connector>
            <label>Approval Needed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Case_Email_Trigger</name>
        <label>Check Case Email Trigger</label>
        <locationX>1040</locationX>
        <locationY>8411</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>RegistrationToBeSent</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contact.Email</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sendNoEmailforFCR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Recpients_Emails</targetReference>
            </connector>
            <label>RegistrationToBeSent</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Child_Case</name>
        <label>Check Child Case</label>
        <locationX>1040</locationX>
        <locationY>539</locationY>
        <defaultConnector>
            <targetReference>toCheckContactCreation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Child_Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ParentId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Acc</targetReference>
            </connector>
            <label>Child Case</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_SMS</name>
        <label>Check for SMS</label>
        <locationX>1040</locationX>
        <locationY>2147</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Choose_Entitlement</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Maintenance_Abu_Dubai</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.ECSS_ABU_DHABI_POLICE_GHQ__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IFM / Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toCheckIFMOrInspireHome</targetReference>
            </connector>
            <label>Maintenance</label>
        </rules>
        <rules>
            <name>Maintenace_Abu_Dhabi</name>
            <conditionLogic>1 AND 2 AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.ECSS_ABU_DHABI_POLICE_GHQ__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IFM / Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ADJJ - AD Jails Projects</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maintenance_Abu_Dhabi_Message</targetReference>
            </connector>
            <label>Maintenace/Abu Dhabi</label>
        </rules>
        <rules>
            <name>Complaint_Provis</name>
            <conditionLogic>2 and (1 or 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Inquiry</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Complaint_Provis</targetReference>
            </connector>
            <label>Complaint/Provis</label>
        </rules>
        <rules>
            <name>Complaint_Aldar_Gift_Card</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Aldar Gift Card</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Complaint_Aldar_Gift_Card</targetReference>
            </connector>
            <label>Complaint/Aldar Gift Card</label>
        </rules>
        <rules>
            <name>Complaints_Khidmah</name>
            <conditionLogic>(1 OR 2) AND 3</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Inquiry</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toCheckInspireHome</targetReference>
            </connector>
            <label>Complaints/Khidmah</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_P1</name>
        <label>Check P1?</label>
        <locationX>886</locationX>
        <locationY>7319</locationY>
        <defaultConnector>
            <targetReference>toCheckMaintenanceCase</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>P1_Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Priority</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>P1</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ECSS_Subflow_to_unlock_Emergency_Case</targetReference>
            </connector>
            <label>P1 Case</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Record_Type</name>
        <label>Check Record Type</label>
        <locationX>1040</locationX>
        <locationY>3671</locationY>
        <defaultConnector>
            <targetReference>UpdateCase</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>FCR_and_Inquiries</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.FCR__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Inquiry</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Status_Completed</targetReference>
            </connector>
            <label>FCR and Inquiries</label>
        </rules>
        <rules>
            <name>Query_Complaint</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Complaints</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Inquiry</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Status_In_Progress</targetReference>
            </connector>
            <label>Query/Complaint</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_retail_subvertical</name>
        <label>Check retail subvertical options</label>
        <locationX>1040</locationX>
        <locationY>4079</locationY>
        <defaultConnector>
            <targetReference>get_Email_Template_Name_from_Metdata</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Retail_options</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yas Mall</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Jimi Mall</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>WTC Mall</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Email_Template_Retail_Name_from_Metdata</targetReference>
            </connector>
            <label>Retail options</label>
        </rules>
        <rules>
            <name>KhidmahHomeTemplate</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Object_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Email_Template_Name_from_Metdata_KH</targetReference>
            </connector>
            <label>KhidmahHomeTemplate</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Template_Id</name>
        <label>Check Template Id</label>
        <locationX>759</locationX>
        <locationY>8843</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Id_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Email_Template_Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Category_Email_Mdt</targetReference>
            </connector>
            <label>Id not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckFCRClosed</name>
        <label>CheckFCRClosed</label>
        <locationX>454</locationX>
        <locationY>5735</locationY>
        <defaultConnector>
            <targetReference>Template_found</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>NoFCREmail</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sendNoEmailforFCR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Perform_FCR_EMail</targetReference>
            </connector>
            <label>NoFCREmail</label>
        </rules>
    </decisions>
    <decisions>
        <name>checkFCRCLosedFunction</name>
        <label>checkFCRCLosedFunction</label>
        <locationX>1598</locationX>
        <locationY>6143</locationY>
        <defaultConnector>
            <targetReference>toCheckTemplateFoundQueue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>HasNoFCR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sendNoEmailforFCR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Perform_FCR_EMail</targetReference>
            </connector>
            <label>HasNoFCR</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckUnit</name>
        <label>CheckUnit</label>
        <locationX>886</locationX>
        <locationY>947</locationY>
        <defaultConnector>
            <targetReference>Update_Child_Case</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Unit_empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assignUnitValue</targetReference>
            </connector>
            <label>Unit empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Choose_Entitlement</name>
        <label>Choose Entitlement</label>
        <locationX>1040</locationX>
        <locationY>3071</locationY>
        <defaultConnector>
            <targetReference>Is_Case_Approved</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sub_Vertical_Provis_Khidmah</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Provis_Khidmah</targetReference>
            </connector>
            <label>Sub Vertical - Provis/Khidmah</label>
        </rules>
        <rules>
            <name>Retail_30_min_4hrs</name>
            <conditionLogic>(1 OR 4) AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retail</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-30-MIN</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-4-HOURS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Aldar hospitality</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Retail_1</targetReference>
            </connector>
            <label>Retail- 30 min &amp;4hrs</label>
        </rules>
        <rules>
            <name>Retail_24_48_120hrs</name>
            <conditionLogic>(1 OR 5) AND (2 OR 3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Retail</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-24-HOURS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-48-HOURS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_SLA_Level_1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SLA-120-HOURS</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Aldar hospitality</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Retail_2</targetReference>
            </connector>
            <label>Retail (24,48,120hrs)</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_Copy_1_of_IsGeneralServicesCase</name>
        <label>IsGeneralServicesCase</label>
        <locationX>462</locationX>
        <locationY>9767</locationY>
        <defaultConnector>
            <targetReference>Case_Creation_Registration_Email</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>If No</defaultConnectorLabel>
        <rules>
            <name>If_yes1</name>
            <conditionLogic>(1 AND 2 AND ( 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 14) AND (11 OR 12) AND (13 OR 15))</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pet Registration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Card</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Booking</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Common Area Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NOC for Unit modifications</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Out of home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management/OA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Integration Profile</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OA Community Manager</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Asset.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS Unit</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tenant Onboarding</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <label>If yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Copy_1_of_IsGeneralServicesCase</name>
        <label>IsGeneralServicesCase</label>
        <locationX>289</locationX>
        <locationY>5627</locationY>
        <defaultConnector>
            <targetReference>CheckFCRClosed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>If No</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_If_yes</name>
            <conditionLogic>(1 AND 2 AND ( 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 14) AND (11 OR 12) AND (13 OR 15) )</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pet Registration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Card</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Booking</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Common Area Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NOC for Unit modifications</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Out of home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management/OA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Integration Profile</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OA Community Manager</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Asset.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS Unit</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tenant Onboarding</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>Perform_FCR_EMail</targetReference>
            </connector>
            <label>If yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Case_Approved</name>
        <label>Is Case Approved?</label>
        <locationX>1040</locationX>
        <locationY>3371</locationY>
        <defaultConnector>
            <targetReference>Check_Record_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Case_Approved_False</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_isCaseApproved__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Top_Up_Contract__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Submit_Topup_Contract_approval</targetReference>
            </connector>
            <label>Is Case Approved - False</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Case_Ecss_Request</name>
        <label>Is Case Ecss Request</label>
        <locationX>1040</locationX>
        <locationY>8111</locationY>
        <defaultConnector>
            <targetReference>Check_Case_Email_Trigger</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Ecss_Request</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Record_Type_Formula__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS Request</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CaseEvent_Notification</targetReference>
            </connector>
            <label>Is Ecss Request</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsGeneralServicesCase</name>
        <label>IsGeneralServicesCase</label>
        <locationX>1433</locationX>
        <locationY>6035</locationY>
        <defaultConnector>
            <targetReference>checkFCRCLosedFunction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>If No</defaultConnectorLabel>
        <rules>
            <name>If_yes</name>
            <conditionLogic>(1 AND 2 AND ( 3 OR 4 OR 5 OR 6 OR 7 OR 8 OR 9 OR 10 OR 14 ) AND (11 OR 12) AND (13 OR 15) AND 16)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SubVertical__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Provis</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pet Registration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Card</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Booking</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Common Area Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>NOC for Unit modifications</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Out of home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Community Management/OA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Integration Profile</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>OA Community Manager</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Asset.RecordType.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS Unit</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Tenant Onboarding</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AssetId</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <conditions>
                <leftValueReference>sendNoEmailforFCR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Perform_FCR_EMail</targetReference>
            </connector>
            <label>If yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Perform_FCR_EMail</name>
        <label>Perform FCR EMail</label>
        <locationX>1040</locationX>
        <locationY>6803</locationY>
        <defaultConnector>
            <targetReference>SF_Notify_Owner</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>is_FCR</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sendNoEmailforFCR</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Approval_Process_needed_On_Case_Creation</targetReference>
            </connector>
            <label>is FCR</label>
        </rules>
    </decisions>
    <decisions>
        <name>Template_found</name>
        <label>Template found</label>
        <locationX>608</locationX>
        <locationY>5843</locationY>
        <defaultConnector>
            <targetReference>Notify_owner_on_creation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>email_template_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Assignment_Email_Template_Record</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Assignment_Email</targetReference>
            </connector>
            <label>email template not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>to_Check_Active_User</name>
        <label>to Check Active User</label>
        <locationX>646</locationX>
        <locationY>5411</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IsActiveUser</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner:User.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Owner_to_Collection</targetReference>
            </connector>
            <label>IsActiveUser</label>
        </rules>
    </decisions>
    <decisions>
        <name>To_check_User_or_Queue</name>
        <label>To check User or Queue</label>
        <locationX>1040</locationX>
        <locationY>5303</locationY>
        <defaultConnector>
            <targetReference>Get_Queue_Members</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>User</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner:User.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>to_Check_Active_User</targetReference>
            </connector>
            <label>User</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckCategoryEmailExists</name>
        <label>toCheckCategoryEmailExists</label>
        <locationX>462</locationX>
        <locationY>9059</locationY>
        <defaultConnector>
            <targetReference>Get_Company_Email_Mdt</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Category_Email_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Category_Email_Mdt</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toAssignAddNameWithCategory</targetReference>
            </connector>
            <label>Category Email Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckCompanyEmailEscalationMDtExists</name>
        <label>toCheckCompanyEmailEscalationMDtExists</label>
        <locationX>660</locationX>
        <locationY>9275</locationY>
        <defaultConnector>
            <targetReference>toAssignAddNameWithDefault</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Company_Email_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Company_Email_Mdt</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toAssignAddNameWithCompany</targetReference>
            </connector>
            <label>Company Email Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckContactCreation</name>
        <label>toCheckContactCreation</label>
        <locationX>1040</locationX>
        <locationY>1439</locationY>
        <defaultConnector>
            <targetReference>Check_for_SMS</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ContactCreationNeeded</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_NewContactLastName__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Account_Type</targetReference>
            </connector>
            <label>ContactCreationNeeded</label>
        </rules>
        <rules>
            <name>ContactRelationShipNeeded</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_NewContactRelationship__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Ac_Asset_Relation</targetReference>
            </connector>
            <label>ContactRelationShipNeeded</label>
        </rules>
        <rules>
            <name>ECSS_contactIdSelected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_contactIdSelected__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateExistingContactValue</targetReference>
            </connector>
            <label>ECSS_contactIdSelected</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckECSSRecord</name>
        <label>toCheckECSSRecord</label>
        <locationX>1601</locationX>
        <locationY>323</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ECSS</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>$Label.ECSS_Label</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Custom_Notification</targetReference>
            </connector>
            <label>ECSS</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckECSSSLAIFMKhidmah</name>
        <label>toCheckECSSSLAIFMKhidmah</label>
        <locationX>578</locationX>
        <locationY>4811</locationY>
        <defaultConnector>
            <targetReference>Assign_Missing_Queue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ECSSSLAIFMKhidmah</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getECSS_Case_Assignment_SLA_ifmKhidmah</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>toGetIFMKhidmahQueue</targetReference>
            </connector>
            <label>ECSSSLAIFMKhidmah</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckECSSSLAKhidmahHome</name>
        <label>toCheckECSSSLAKhidmahHome</label>
        <locationX>1106</locationX>
        <locationY>4811</locationY>
        <defaultConnector>
            <targetReference>AssignMissing_Queue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ECSSSLAKhidmahHome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getECSS_Case_Assignment_SLA_KhidmahHome</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetKhidmahHomeQueue</targetReference>
            </connector>
            <label>ECSSSLAKhidmahHome</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckIFMOrInspireHome</name>
        <label>toCheckIFMOrInspireHome</label>
        <locationX>182</locationX>
        <locationY>2255</locationY>
        <defaultConnector>
            <targetReference>InspireHomeMaintenance</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IFM</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_Contract__r.ECSS_SalesOrganization__r.SAPExternalId__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>1300</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Maintenance_Message</targetReference>
            </connector>
            <label>IFM</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckInspireHome</name>
        <label>toCheckInspireHome</label>
        <locationX>1502</locationX>
        <locationY>2255</locationY>
        <defaultConnector>
            <targetReference>Generic_Khidmah_Cases</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>InspireHomeCase</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CaseCategory__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Object_Category__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah Home</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IFM_Khidmah_Cases</targetReference>
            </connector>
            <label>InspireHomeCase</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckMaintenanceCase</name>
        <label>toCheckMaintenanceCase</label>
        <locationX>1040</locationX>
        <locationY>7811</locationY>
        <defaultConnector>
            <targetReference>Is_Case_Ecss_Request</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>maintenanceCase</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Task_to_schedule_an_appointment</targetReference>
            </connector>
            <label>maintenanceCase</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckRequestQueueAssignment</name>
        <label>toCheckRequestQueueAssignment</label>
        <locationX>1040</locationX>
        <locationY>4595</locationY>
        <defaultConnector>
            <targetReference>To_check_User_or_Queue</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>RequestCaseIFM_Khidmah</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Contract__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ECSS_Contract__r.ECSS_SalesOrganization__r.SAPExternalId__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>1300</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>getECSS_Case_Assignment_SLA_ifmKhidmah</targetReference>
            </connector>
            <label>RequestCaseIFM/Khidmah</label>
        </rules>
        <rules>
            <name>KhidmahHomeRequest</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ECSS_CompanyOptions__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Khidmah</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Recordtype_Name__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>getECSS_Case_Assignment_SLA_KhidmahHome</targetReference>
            </connector>
            <label>KhidmahHomeRequest</label>
        </rules>
    </decisions>
    <decisions>
        <name>toCheckTemplateFoundQueue</name>
        <label>toCheckTemplateFoundQueue</label>
        <locationX>1752</locationX>
        <locationY>6251</locationY>
        <defaultConnector>
            <targetReference>Notify_QueueOwner_on_creation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Email_not_null_for_Queue</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>get_Assignment_Email_Template_Record</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Origin</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Email</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>ECSS_Maintenance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Assignment_Email_to_Queue</targetReference>
            </connector>
            <label>Email not null for Queue</label>
        </rules>
    </decisions>
    <description>ECSS Request Event Notification Changes</description>
    <environments>Default</environments>
    <formulas>
        <name>CaseCountryCode</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!$Record.ECSS_CompanyOptions__c},&apos;Provis&apos;),&apos;770&apos;
     ,&apos;880&apos;
)</expression>
    </formulas>
    <formulas>
        <name>CaseSubject</name>
        <dataType>String</dataType>
        <expression>IF(
   $Record.Recordtype_Name__c != $Label.ECSS_Email_RecType_DevName,
   
   IF(
    OR( IsPickval({!$Record.CaseCategory__c},&apos;Khidmah Home&apos;),IsPickval({!$Record.CaseCategory__c},&apos;Inspire Home&apos;)),
     &apos;Inspire Home&apos;,
     IF(
       IsPickval({!$Record.CaseCategory__c},&apos;IFM / Khidmah Home&apos;),
       &apos;IFM / Inspire Home&apos;, IF(  IsPickval({!$Record.CaseCategory__c},&apos;IFM/ Khidmah Home&apos;),  &apos;IFM/ Inspire Home&apos;,
Text({!$Record.CaseCategory__c})  )   )
   ) 
   &amp; &apos;|&apos; &amp; $Record.ECSS_Sub_Category_Text__c &amp; &apos;|&apos; &amp; $Record.CaseNumber,
   
   $Record.CaseNumber &amp; &apos;| &apos; &amp; LEFT($Record.Subject,200)
)</expression>
    </formulas>
    <formulas>
        <name>CategoryPreview</name>
        <dataType>String</dataType>
        <expression>TEXT({!$Record.Category__c})</expression>
    </formulas>
    <formulas>
        <name>DateTime</name>
        <dataType>DateTime</dataType>
        <expression>{!$Flow.CurrentDateTime} + (1/24)</expression>
    </formulas>
    <formulas>
        <name>DateTimeHour</name>
        <dataType>DateTime</dataType>
        <expression>{!$Flow.CurrentDateTime} + (1/24)</expression>
    </formulas>
    <formulas>
        <name>FunctionLocationSubString</name>
        <dataType>String</dataType>
        <expression>LEFT({!$Record.Asset.ExternalIdentifier}, FIND(&quot;/&quot;, {!$Record.Asset.ExternalIdentifier}) - 1)</expression>
    </formulas>
    <formulas>
        <name>Maintenance</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!$Label.ECSS_SMS_Maintenance_Khidmah_Home},&apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber})</expression>
    </formulas>
    <formulas>
        <name>maintenanceAbuDhabi</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!$Label.ECSS_SMS_Maintenance_Khidmah_Home_AR}, &apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber})</expression>
    </formulas>
    <formulas>
        <name>messageComplaintAldar</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(SUBSTITUTE({!$Label.ECSS_SMS_Complaint_Aldar_Gift_Card}, &apos;&lt;Ticket ID&gt;&apos;, {!$Record.CaseNumber}),&apos;&lt;Customer Name&gt;&apos;,{!$Record.ECSS_Account_Name__c})</expression>
    </formulas>
    <formulas>
        <name>MobileConcatenation</name>
        <dataType>String</dataType>
        <expression>{!$Record.ECSS_NewContactCountryCode__c}+{!$Record.ECSS_NewContactMobileNumber__c}</expression>
    </formulas>
    <formulas>
        <name>mobNoReco</name>
        <dataType>String</dataType>
        <expression>&apos;971&apos; + {!$Record.ContactMobile}</expression>
    </formulas>
    <formulas>
        <name>TypeName</name>
        <dataType>String</dataType>
        <expression>IF(
    NOT(ISBLANK( TEXT({!$Record.Type}))),
    TEXT({!$Record.Type}),
    IF(
        BEGINS({!$Record.RecordType.Name}, &quot;ECSS &quot;),
        MID({!$Record.RecordType.Name}, 6, LEN({!$Record.RecordType.Name})),
        {!$Record.RecordType.Name}
    )
)</expression>
    </formulas>
    <interviewLabel>ECSS_Case: On Creation {!$Flow.CurrentDateTime}</interviewLabel>
    <label>ECSS_Case: On Creation</label>
    <loops>
        <name>Loop_on_Queue_Users</name>
        <label>Loop on Queue Users</label>
        <locationX>1433</locationX>
        <locationY>5735</locationY>
        <collectionReference>Get_Queue_Users</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Owner_Queue_to_Collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>IsGeneralServicesCase</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Ac_Asset_Relation</name>
        <label>Create Ac Asset Relation</label>
        <locationX>974</locationX>
        <locationY>1547</locationY>
        <connector>
            <targetReference>toUpdateContactWithTheNewExistingContact</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>$Record.AssetId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactRelationship__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact_Account_Unit__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Contact</name>
        <label>Create Contact</label>
        <locationX>446</locationX>
        <locationY>1655</locationY>
        <connector>
            <targetReference>toUpdateCaseWithNewContacts</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Email</field>
            <value>
                <elementReference>$Record.NewContactEmail__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FirstName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactFirstName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactLastName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobileCountryCode__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactCountryCode__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone</field>
            <value>
                <elementReference>MobileConcatenation</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactMobileNumber__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Contact_Person</name>
        <label>Create Contact</label>
        <locationX>710</locationX>
        <locationY>1655</locationY>
        <connector>
            <targetReference>toUpdateCaseWithContactRelationshipId</targetReference>
        </connector>
        <inputAssignments>
            <field>Email</field>
            <value>
                <elementReference>$Record.NewContactEmail__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FirstName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactFirstName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastName</field>
            <value>
                <elementReference>$Record.ECSS_NewContactLastName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobileCountryCode__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactCountryCode__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone</field>
            <value>
                <elementReference>MobileConcatenation</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobilePhone__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactMobileNumber__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_P1_Task</name>
        <label>Create P1 Task</label>
        <locationX>754</locationX>
        <locationY>7535</locationY>
        <connector>
            <targetReference>toCheckMaintenanceCase</targetReference>
        </connector>
        <inputAssignments>
            <field>ActivityDate</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_CaseCountryCode__c</field>
            <value>
                <elementReference>CaseCountryCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_CaseMobileNumber__c</field>
            <value>
                <elementReference>$Record.ContactMobile</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_DueDateTime__c</field>
            <value>
                <elementReference>DateTimeHour</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_P1Check__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>First_Name__c</field>
            <value>
                <stringValue>P1 Callout</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Callback</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>Callback</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>$Record.RecordId__c</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Task_to_schedule_an_appointment</name>
        <label>Create Task to schedule an appointment</label>
        <locationX>908</locationX>
        <locationY>7919</locationY>
        <connector>
            <targetReference>Is_Case_Ecss_Request</targetReference>
        </connector>
        <inputAssignments>
            <field>ECSS_DueDateTime__c</field>
            <value>
                <elementReference>DateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>First_Name__c</field>
            <value>
                <elementReference>TaskName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Schedule Appointment</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>toCreateOrganizatoinContactAccountUnit</name>
        <label>toCreateOrganizatoinContactAccountUnit</label>
        <locationX>446</locationX>
        <locationY>1871</locationY>
        <connector>
            <targetReference>Check_for_SMS</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>$Record.AssetId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>Create_Contact</elementReference>
            </value>
        </inputAssignments>
        <object>Contact_Account_Unit__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>toCreatePersonContactAccountUnit</name>
        <label>toCreatePersonContactAccountUnit</label>
        <locationX>710</locationX>
        <locationY>1871</locationY>
        <connector>
            <targetReference>Check_for_SMS</targetReference>
        </connector>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Asset__c</field>
            <value>
                <elementReference>$Record.AssetId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contact__c</field>
            <value>
                <elementReference>Create_Contact_Person</elementReference>
            </value>
        </inputAssignments>
        <object>Contact_Account_Unit__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>get_Assignment_Email_Template_Record</name>
        <label>get Assignment Email Template Record</label>
        <locationX>1040</locationX>
        <locationY>4487</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckRequestQueueAssignment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>Contains</operator>
            <value>
                <elementReference>ECSSCaseAssign.Assignment_Email_Template__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailTemplate</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Category_Email_Mdt</name>
        <label>Get Category Email Mdt</label>
        <locationX>462</locationX>
        <locationY>8951</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckCategoryEmailExists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Incident_Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Escalation_Email_Address__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Company_Email_Mdt</name>
        <label>Get Company Email Mdt</label>
        <locationX>660</locationX>
        <locationY>9167</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckCompanyEmailEscalationMDtExists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Company__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.ECSS_CompanyOptions__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Escalation_Email_Address__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Custom_Notification</name>
        <label>Get Custom Notification</label>
        <locationX>1040</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Child_Case</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>ECSS_Case_Owner_Notification</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CustomNotificationType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Email_Template_Id</name>
        <label>Get Email Template Id</label>
        <locationX>759</locationX>
        <locationY>8735</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Template_Id</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Email_Template_Action.EmailTemplate</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>EmailTemplate</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Email_Template_Name_from_Metdata</name>
        <label>get Email Template Name from Metdata</label>
        <locationX>1304</locationX>
        <locationY>4187</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toAssignCaseMdt</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Sub_Vertical__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Email_Template_Name_from_Metdata_KH</name>
        <label>get Email Template Name from Metdata KH</label>
        <locationX>1040</locationX>
        <locationY>4187</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toAssignKHMdt</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Sub_Vertical__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SubVertical__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Khidmah Home</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_Email_Template_Retail_Name_from_Metdata</name>
        <label>get Email Template Retail Name from Metdata</label>
        <locationX>776</locationX>
        <locationY>4187</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toAssignRetailCaseMdt</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.CaseCategory__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Active_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_OrgWideAddress</name>
        <label>Get OrgWideAddress</label>
        <locationX>462</locationX>
        <locationY>9659</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_1_of_Copy_1_of_IsGeneralServicesCase</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Address</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>AddName</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrgWideEmailAddress</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Queue_Members</name>
        <label>Get Queue Members</label>
        <locationX>1433</locationX>
        <locationY>5411</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Owner_Ids</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>GroupId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>GroupMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Queue_Users</name>
        <label>Get Queue Users</label>
        <locationX>1433</locationX>
        <locationY>5627</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_on_Queue_Users</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>Assign_Owner_Ids</elementReference>
            </value>
        </filters>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_SMS_Metadata</name>
        <label>Get SMS Metadata</label>
        <locationX>1040</locationX>
        <locationY>2747</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>add_MobilePhone</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SMSCategory</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_SMS_Configuration__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getECSS_Case_Assignment_SLA_ifmKhidmah</name>
        <label>getECSS_Case_Assignment_SLA_ifmKhidmah</label>
        <locationX>578</locationX>
        <locationY>4703</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckECSSSLAIFMKhidmah</targetReference>
        </connector>
        <filterLogic>1 AND( 2 OR 3)</filterLogic>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>IFM/ Khidmah Home</stringValue>
            </value>
        </filters>
        <filters>
            <field>Functional_Location__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Asset.ExternalIdentifier</elementReference>
            </value>
        </filters>
        <filters>
            <field>Site__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>FunctionLocationSubString</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getECSS_Case_Assignment_SLA_KhidmahHome</name>
        <label>getECSS_Case_Assignment_SLA_KhidmahHome</label>
        <locationX>1106</locationX>
        <locationY>4703</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toCheckECSSSLAKhidmahHome</targetReference>
        </connector>
        <filterLogic>1 AND( 2 OR 3)</filterLogic>
        <filters>
            <field>Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Khidmah Home</stringValue>
            </value>
        </filters>
        <filters>
            <field>Functional_Location__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Asset.ExternalIdentifier</elementReference>
            </value>
        </filters>
        <filters>
            <field>Site__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>FunctionLocationSubString</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ECSS_Case_Assignment_SLA__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetKhidmahHomeQueue</name>
        <label>GetKhidmahHomeQueue</label>
        <locationX>974</locationX>
        <locationY>4919</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toUpdateKhidmahHomeCaseQueue</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getECSS_Case_Assignment_SLA_KhidmahHome.Owner_Queue_Name__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Group</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>toGetIFMKhidmahQueue</name>
        <label>toGetIFMKhidmahQueue</label>
        <locationX>446</locationX>
        <locationY>4919</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>toUpdateCaseOwnerQueue</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>getECSS_Case_Assignment_SLA_ifmKhidmah.Owner_Queue_Name__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Group</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Assign_Missing_Queue</name>
        <label>Assign Missing Queue</label>
        <locationX>710</locationX>
        <locationY>4919</locationY>
        <connector>
            <targetReference>To_check_User_or_Queue</targetReference>
        </connector>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Label.EcssRequestMissingQueue</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>AssignMissing_Queue</name>
        <label>AssignMissing Queue</label>
        <locationX>1238</locationX>
        <locationY>4919</locationY>
        <connector>
            <targetReference>To_check_User_or_Queue</targetReference>
        </connector>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>$Label.EcssRequestMissingQueue</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>toUpdateCaseOwnerQueue</name>
        <label>toUpdateCaseOwnerQueue</label>
        <locationX>446</locationX>
        <locationY>5027</locationY>
        <connector>
            <targetReference>To_check_User_or_Queue</targetReference>
        </connector>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>toGetIFMKhidmahQueue.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>toUpdateCaseWithContactRelationshipId</name>
        <label>toUpdateCaseWithContactRelationshipId</label>
        <locationX>710</locationX>
        <locationY>1763</locationY>
        <connector>
            <targetReference>toCreatePersonContactAccountUnit</targetReference>
        </connector>
        <inputAssignments>
            <field>ContactId</field>
            <value>
                <elementReference>Create_Contact_Person</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobileNumber__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactMobileNumber__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>toUpdateCaseWithNewContacts</name>
        <label>toUpdateCaseWithNewContacts</label>
        <locationX>446</locationX>
        <locationY>1763</locationY>
        <connector>
            <targetReference>toCreateOrganizatoinContactAccountUnit</targetReference>
        </connector>
        <inputAssignments>
            <field>ContactId</field>
            <value>
                <elementReference>Create_Contact</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MobileNumber__c</field>
            <value>
                <elementReference>$Record.ECSS_NewContactMobileNumber__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>toUpdateContactWithTheNewExistingContact</name>
        <label>toUpdateContactWithTheNewExistingContact</label>
        <locationX>974</locationX>
        <locationY>1655</locationY>
        <connector>
            <targetReference>Check_for_SMS</targetReference>
        </connector>
        <inputAssignments>
            <field>ContactId</field>
            <value>
                <elementReference>$Record.ECSS_NewContactRelationship__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>toUpdateKhidmahHomeCaseQueue</name>
        <label>toUpdateKhidmahHomeCaseQueue</label>
        <locationX>974</locationX>
        <locationY>5027</locationY>
        <connector>
            <targetReference>To_check_User_or_Queue</targetReference>
        </connector>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>GetKhidmahHomeQueue.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Child_Case</name>
        <label>Update Child Case</label>
        <locationX>886</locationX>
        <locationY>1247</locationY>
        <connector>
            <targetReference>toCheckContactCreation</targetReference>
        </connector>
        <inputReference>updateCaseVal</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateCase</name>
        <label>Update Case</label>
        <locationX>1040</locationX>
        <locationY>3971</locationY>
        <connector>
            <targetReference>Check_retail_subvertical</targetReference>
        </connector>
        <inputAssignments>
            <field>ECSS_Contact_Email_Enc__c</field>
            <value>
                <elementReference>$Record.ContactEmail</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_Contact_Mobile_Enc__c</field>
            <value>
                <elementReference>$Record.ContactMobile</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ECSS_Contact_Phone_Enc__c</field>
            <value>
                <elementReference>$Record.ContactPhone</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EntitlementId</field>
            <value>
                <elementReference>entitlementId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>CaseSubject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>TypeName</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateExistingContactValue</name>
        <label>UpdateExistingContactValue</label>
        <locationX>1238</locationX>
        <locationY>1547</locationY>
        <connector>
            <targetReference>Check_for_SMS</targetReference>
        </connector>
        <inputAssignments>
            <field>ContactId</field>
            <value>
                <elementReference>$Record.ECSS_contactIdSelected__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>1475</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>toCheckECSSRecord</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceCloudCaseNumber__c</field>
            <operator>EqualTo</operator>
        </filters>
        <object>Case</object>
        <recordTriggerType>Create</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>CaseEvent_Notification</name>
        <label>CaseEvent Notification</label>
        <locationX>908</locationX>
        <locationY>8219</locationY>
        <connector>
            <targetReference>Check_Case_Email_Trigger</targetReference>
        </connector>
        <flowName>Case_Event_Sub_Flow</flowName>
        <inputAssignments>
            <name>CaseRecord</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>ECSS_Subflow_to_unlock_Emergency_Case</name>
        <label>ECSS_Subflow to unlock Emergency Case</label>
        <locationX>754</locationX>
        <locationY>7427</locationY>
        <connector>
            <targetReference>Create_P1_Task</targetReference>
        </connector>
        <flowName>ECSS_Subflow_to_unlock_Emergency_Case</flowName>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>$Record.RecordId__c</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <textTemplates>
        <name>newCaseAssignment</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Dear {!$Record.Owner:User.FirstName} {!$Record.Owner:User.LastName} ,
A new Case {!$Record.CaseNumber} has been assigned to you.
The case priority is {!$Record.Priority} .</text>
    </textTemplates>
    <textTemplates>
        <name>RegistrationBody</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Dear {!$Record.Account.Name},
We are writing to confirm that your case has been successfully registered.
Case Details:
    - Case Number: {!$Record.CaseNumber}
    - Case Type: {!$Record.Type}
    - Date Registered: {!$Record.CreatedDate}
Best regards,</text>
    </textTemplates>
    <textTemplates>
        <name>TaskName</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Schedule Appointment #{!$Record.CaseNumber}</text>
    </textTemplates>
    <transforms>
        <name>Assign_Owner_Ids</name>
        <label>Assign Owner Ids</label>
        <locationX>1433</locationX>
        <locationY>5519</locationY>
        <connector>
            <targetReference>Get_Queue_Users</targetReference>
        </connector>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <scale>0</scale>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <transformValues>
            <transformValueActions>
                <transformType>Map</transformType>
                <value>
                    <elementReference>Get_Queue_Members[$EachItem].UserOrGroupId</elementReference>
                </value>
            </transformValueActions>
        </transformValues>
    </transforms>
    <variables>
        <name>accRec</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>AddName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>caseStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>currentItem_check_For_Active_Users</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>User</objectType>
    </variables>
    <variables>
        <name>ECSSCaseAssign</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ECSS_Case_Assignment_SLA__c</objectType>
    </variables>
    <variables>
        <name>emailAdressCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>entitlementId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>isArabicMssg</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>messageText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>mobilePhoneList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ownerRecepients</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ownerRecpientIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>QueueOwnerIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecpientIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>sendNoEmailforFCR</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>SMSCategory</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Generic</stringValue>
        </value>
    </variables>
    <variables>
        <name>updateCaseVal</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
</Flow>
