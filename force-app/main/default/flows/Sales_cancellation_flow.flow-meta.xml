<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Approval_email_to_owner</name>
        <label>Approval email to owner</label>
        <locationX>710</locationX>
        <locationY>3216</locationY>
        <actionName>SalesOrderCancellation__c.SalesOrderCancellationApprovalemailtoOwner</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Refund_Applicable</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.SalesOrderCancellationApprovalemailtoOwner</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Cancellationapprovalemailtofinace</name>
        <label>Cancellation approval email to finace</label>
        <locationX>710</locationX>
        <locationY>3516</locationY>
        <actionName>SalesOrderCancellation__c.SalesOrderCancellationApprovalemailtoFinance</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Check_if_SM_is_active</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.SalesOrderCancellationApprovalemailtoFinance</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Inform_User_About_Sales_Cancellation1</name>
        <label>Inform User About Sales Cancellation</label>
        <locationX>710</locationX>
        <locationY>3816</locationY>
        <actionName>SalesOrderCancellation__c.InformUserAboutSalesCancellation</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.InformUserAboutSalesCancellation</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Rejection_email_alert</name>
        <label>Rejection email alert</label>
        <locationX>50</locationX>
        <locationY>492</locationY>
        <actionName>SalesOrderCancellation__c.SalesOrderCancellationRejectionemailtoOwner</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.SalesOrderCancellationRejectionemailtoOwner</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Reminder_notification_before_24hours_after_2days_approvals_of_extension</name>
        <label>Reminder notification before 24hours after 2days approvals of extension</label>
        <locationX>2074</locationX>
        <locationY>276</locationY>
        <actionName>SalesOrderCancellation__c.Sales_Order_Cancellation_24H_before_Remainder_for_2_days</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.Sales_Order_Cancellation_24H_before_Remainder_for_2_days</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Reminder_notification_before_24hours_after_7_days_approvals_of_extension</name>
        <label>Reminder notification before 24hours after 7 days approvals of extension</label>
        <locationX>2338</locationX>
        <locationY>276</locationY>
        <actionName>SalesOrderCancellation__c.Sales_Order_Cancellation_24H_before_Remainder_for_7_days</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.Sales_Order_Cancellation_24H_before_Remainder_for_7_days</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Sales_Order_Cancellation_Approved_for_2_days</name>
        <label>Sales Order Cancellation Approved for 2 days</label>
        <locationX>578</locationX>
        <locationY>2208</locationY>
        <actionName>SalesOrderCancellation__c.Sales_Order_Cancellation_Approved_for_2_days</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Get_Pending_DDRs</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.Sales_Order_Cancellation_Approved_for_2_days</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Sales_Order_Cancellation_Approved_for_7_days</name>
        <label>Sales Order Cancellation Approved for 7 days</label>
        <locationX>842</locationX>
        <locationY>2208</locationY>
        <actionName>SalesOrderCancellation__c.Sales_Order_Cancellation_Approved_for_7_days</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Get_Pending_DDRs</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.Sales_Order_Cancellation_Approved_for_7_days</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Sales_Order_Cancellation_Rejection_for_2_days</name>
        <label>Sales Order Cancellation Rejection for 2 days</label>
        <locationX>314</locationX>
        <locationY>708</locationY>
        <actionName>SalesOrderCancellation__c.Sales_Order_Cancellation_Rejection_for_2_days</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.Sales_Order_Cancellation_Rejection_for_2_days</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Sales_Order_Cancellation_Rejection_for_7_days</name>
        <label>Sales Order Cancellation Rejection for 7 days</label>
        <locationX>578</locationX>
        <locationY>708</locationY>
        <actionName>SalesOrderCancellation__c.Sales_Order_Cancellation_Rejection_for_7_days</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>SalesOrderCancellation__c.Sales_Order_Cancellation_Rejection_for_7_days</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Submit_for_line_manager_s_approval</name>
        <label>Submit for line manager&apos;s approval</label>
        <locationX>1106</locationX>
        <locationY>600</locationY>
        <actionName>submit</actionName>
        <actionType>submit</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>objectId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>processDefinitionNameOrId</name>
            <value>
                <stringValue>Sales_Cancellation_ApprovalV22</stringValue>
            </value>
        </inputParameters>
        <nameSegment>submit</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>54.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>UpdateApprovePendingStatus</name>
        <label>UpdateApprovePendingStatus</label>
        <locationX>842</locationX>
        <locationY>1800</locationY>
        <assignmentItems>
            <assignToReference>NewSalesOrderStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Approve Pending Cancellation</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Sales_Order</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdatePendingStatus</name>
        <label>UpdatePendingStatus</label>
        <locationX>578</locationX>
        <locationY>1800</locationY>
        <assignmentItems>
            <assignToReference>NewSalesOrderStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pending Cancellation</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Sales_Order</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_for_Black_Listed_Customer</name>
        <label>Check for Black Listed Customer</label>
        <locationX>842</locationX>
        <locationY>2808</locationY>
        <defaultConnector>
            <targetReference>Is_sales_manager_null</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Black_Listed_Customer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Black_List_Customer__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Account</targetReference>
            </connector>
            <label>Is Black Listed Customer</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_existing_SO_status</name>
        <label>Check for existing SO status</label>
        <locationX>842</locationX>
        <locationY>1692</locationY>
        <defaultConnector>
            <targetReference>Update_Sales_Order</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Pending_Status</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getSODetails1.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdatePendingStatus</targetReference>
            </connector>
            <label>Pending Status</label>
        </rules>
        <rules>
            <name>Approve_Pending_status</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getSODetails1.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approve Pending</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateApprovePendingStatus</targetReference>
            </connector>
            <label>Approve Pending status</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_SM_is_active</name>
        <label>Check if SM is active</label>
        <locationX>842</locationX>
        <locationY>3708</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Active</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getSODetails1.SalesManager__r.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Inform_User_About_Sales_Cancellation1</targetReference>
            </connector>
            <label>Is Active</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Reserved_Unit</name>
        <label>Check Reserved Unit</label>
        <locationX>1238</locationX>
        <locationY>492</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Reserved_Unit</name>
            <conditionLogic>(1 OR 2 ) AND 3 AND 4</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SalesOrder__r.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reserved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SalesOrder__r.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reservation In Progress</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LondonSquareProjects</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Unit__r.ProjectName__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Balghaiylam</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Submit_for_line_manager_s_approval</targetReference>
            </connector>
            <label>Is Reserved Unit</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Sales_Order_Status</name>
        <label>Check Sales Order Status</label>
        <locationX>842</locationX>
        <locationY>1176</locationY>
        <defaultConnector>
            <targetReference>Update_Unit</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sold</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SalesOrder__r.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sold</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SalesOrder__r.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>RTO Sold</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Maria_User</targetReference>
            </connector>
            <label>Sold</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Status</name>
        <label>Check Status</label>
        <locationX>842</locationX>
        <locationY>276</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Approved</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Cancellation_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Cancellation_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Sales_Order_Status</targetReference>
            </connector>
            <label>Approved</label>
        </rules>
        <rules>
            <name>Rejected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Cancellation_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Rejected</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Cancellation_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>LondonSquareProjects</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SalesOrder__r.Unit__r.ProjectName__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Balghaiylam</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Sales_Manager_null_check</targetReference>
            </connector>
            <label>Rejected</label>
        </rules>
        <rules>
            <name>Awaiting_Approval</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Cancellation_Status__c</leftValueReference>
                <operator>EqualTo</operator>
            </conditions>
            <connector>
                <targetReference>UpdateLineManager</targetReference>
            </connector>
            <label>Awaiting Approval</label>
        </rules>
        <rules>
            <name>Auto_Sales_Order_Cancellation</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ReasonforCancellation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Auto Cancellation of Salesorder on 31 Day</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ReasonforCancellation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Auto Cancellation of Salesorder on Extended Date</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Sales_Order_Status</targetReference>
            </connector>
            <label>Auto Sales Order Cancellation</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_the_Sales_Order_Cancellation_Approved</name>
        <label>Check the Sales Order Cancellation Approved</label>
        <locationX>842</locationX>
        <locationY>2100</locationY>
        <defaultConnector>
            <targetReference>Get_Pending_DDRs</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Approved_for_2_days</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellationfor2days__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Sales_Order_Cancellation_Approved_for_2_days</targetReference>
            </connector>
            <label>Is Approved for 2 days</label>
        </rules>
        <rules>
            <name>Is_Approved_for_7_days</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellationfor7days__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Sales_Order_Cancellation_Approved_for_7_days</targetReference>
            </connector>
            <label>Is Approved for 7 days</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_the_status_of_Direct_Debit_record</name>
        <label>Check the status of Direct Debit record</label>
        <locationX>842</locationX>
        <locationY>2508</locationY>
        <defaultConnector>
            <targetReference>Check_for_Black_Listed_Customer</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_status_is_Pending_Or_Received_by_Finance</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Pending_DDRs.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>DDS Generated</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Pending_DDRs.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Received by Finance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_DDR_status_to_Pending</targetReference>
            </connector>
            <label>If status is Pending Or Received by Finance</label>
        </rules>
        <rules>
            <name>If_status_is_Verified_or_Received_by_finance</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Pending_DDRs.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Verified by Finance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Pending_DDRs.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sent to Bank</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_direct_debit_record</targetReference>
            </connector>
            <label>If status is Verified or Received by finance</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_sales_manager_null</name>
        <label>Is sales manager null</label>
        <locationX>842</locationX>
        <locationY>3108</locationY>
        <defaultConnector>
            <targetReference>Refund_Applicable</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sales_manager_not_null2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SalesManager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SalesManager__r.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Approval_email_to_owner</targetReference>
            </connector>
            <label>Sales manager not null</label>
        </rules>
    </decisions>
    <decisions>
        <description>Email to Finance Team</description>
        <name>Refund_Applicable</name>
        <label>Refund Applicable?</label>
        <locationX>842</locationX>
        <locationY>3408</locationY>
        <defaultConnector>
            <targetReference>Check_if_SM_is_active</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RefundAmount__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RefundAmount__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Cancellationapprovalemailtofinace</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Sales_Manager_null_check</name>
        <label>Sales Manager null check</label>
        <locationX>314</locationX>
        <locationY>384</locationY>
        <defaultConnector>
            <targetReference>Sales_Order_Cancellation_Record_Update</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sales_manager_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SalesManager__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Rejection_email_alert</targetReference>
            </connector>
            <label>Sales manager not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Sales_Order_Cancellation_Record_Update</name>
        <label>Sales Order Cancellation Record Update</label>
        <locationX>578</locationX>
        <locationY>492</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>for_2_Days</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellationfor2days__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Sales_Order_Cancellation_Update_Record_for_2_days</targetReference>
            </connector>
            <label>for 2 Days</label>
        </rules>
        <rules>
            <name>for_7_days</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsReservationCancellationfor7days__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Sales_Order_Cancellation_Update_Record_for_7_days</targetReference>
            </connector>
            <label>for 7 days</label>
        </rules>
    </decisions>
    <description>SSP-588 - Add Entry criteria for sales order status check and SSP-576 - Check if sales manager is active inside the decision Is sales manager null</description>
    <environments>Default</environments>
    <formulas>
        <name>LondonSquareProjects</name>
        <dataType>Boolean</dataType>
        <expression>NOT(CONTAINS({!$Record.Unit__r.ProjectName__c}, &quot;London Square&quot;))</expression>
    </formulas>
    <formulas>
        <name>ReservationExtension2days</name>
        <dataType>Date</dataType>
        <expression>TODAY() + 3</expression>
    </formulas>
    <formulas>
        <name>ReservationExtension7days</name>
        <dataType>Date</dataType>
        <expression>Today()+8</expression>
    </formulas>
    <interviewLabel>Sales cancellation flow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Sales cancellation flow</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Maria_User</name>
        <label>Get Maria User</label>
        <locationX>710</locationX>
        <locationY>1284</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Unit_Blocked</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Email</field>
            <operator>StartsWith</operator>
            <value>
                <stringValue>mcorrea@aldar.com</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Pending_DDRs</name>
        <label>Get Pending DDRs</label>
        <locationX>842</locationX>
        <locationY>2400</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_the_status_of_Direct_Debit_record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SalesOrder__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SalesOrder__r.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>DirectDebitRequest__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getSODetails1</name>
        <label>getSODetails1</label>
        <locationX>842</locationX>
        <locationY>1584</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_for_existing_SO_status</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SalesOrder__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SalesOrder__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Sales_Order_Cancellation_Update_Record_for_2_days</name>
        <label>Sales Order Cancellation Update Record for 2 days</label>
        <locationX>314</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Sales_Order_Cancellation_Rejection_for_2_days</targetReference>
        </connector>
        <inputAssignments>
            <field>ReservationExtension2daysapprovals__c</field>
            <value>
                <elementReference>ReservationExtension2days</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Sales_Order_Cancellation_Update_Record_for_7_days</name>
        <label>Sales Order Cancellation Update Record for 7 days</label>
        <locationX>578</locationX>
        <locationY>600</locationY>
        <connector>
            <targetReference>Sales_Order_Cancellation_Rejection_for_7_days</targetReference>
        </connector>
        <inputAssignments>
            <field>ReservationExtension7daysapprovals__c</field>
            <value>
                <elementReference>ReservationExtension7days</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Account</name>
        <label>Update Account</label>
        <locationX>710</locationX>
        <locationY>2916</locationY>
        <connector>
            <targetReference>Is_sales_manager_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SalesOrder__r.Account__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>BlacklistReason__c</field>
            <value>
                <stringValue>Sales Cancellation</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Blacklisted__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Account</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_DDR_status_to_Pending</name>
        <label>Update DDR status to Pending</label>
        <locationX>578</locationX>
        <locationY>2616</locationY>
        <connector>
            <targetReference>Check_for_Black_Listed_Customer</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Pending_DDRs.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Cancelled</stringValue>
            </value>
        </inputAssignments>
        <object>DirectDebitRequest__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_direct_debit_record</name>
        <label>Update direct debit record</label>
        <locationX>842</locationX>
        <locationY>2616</locationY>
        <connector>
            <targetReference>Check_for_Black_Listed_Customer</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Pending_DDRs.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Pending_cancellation_with_finance__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Cancellation in progress</stringValue>
            </value>
        </inputAssignments>
        <object>DirectDebitRequest__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Sales_Order</name>
        <label>Update Sales Order</label>
        <locationX>842</locationX>
        <locationY>1992</locationY>
        <connector>
            <targetReference>Check_the_Sales_Order_Cancellation_Approved</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SalesOrder__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>SalesOrderCancellationReason__c</field>
            <value>
                <elementReference>$Record.ReasonforCancellation__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SalesOrderCancelledDate__c</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Cancelled</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SubStatus__c</field>
            <value>
                <elementReference>NewSalesOrderStatus</elementReference>
            </value>
        </inputAssignments>
        <object>SalesOrder__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Unit</name>
        <label>Update Unit</label>
        <locationX>974</locationX>
        <locationY>1284</locationY>
        <connector>
            <targetReference>getSODetails1</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Unit__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>BlockedBy__c</field>
            <value>
                <elementReference>$Record.SalesOrder__r.SalesManager__r.ManagerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BlockedComments__c</field>
            <value>
                <stringValue>Blocked due to Sales Cancellation</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BlockedReason__c</field>
            <value>
                <stringValue>SALES CANCELLATION</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Blocked</stringValue>
            </value>
        </inputAssignments>
        <object>Unit__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Unit_Blocked</name>
        <label>Update Unit(Blocked)</label>
        <locationX>710</locationX>
        <locationY>1392</locationY>
        <connector>
            <targetReference>getSODetails1</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Unit__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>BlockedBy__c</field>
            <value>
                <elementReference>Get_Maria_User.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BlockedComments__c</field>
            <value>
                <stringValue>Blocked due to Sales Cancellation</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BlockedReason__c</field>
            <value>
                <stringValue>Sales Cancellation</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Blocked</stringValue>
            </value>
        </inputAssignments>
        <object>Unit__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateLineManager</name>
        <label>UpdateLineManager</label>
        <locationX>1238</locationX>
        <locationY>384</locationY>
        <connector>
            <targetReference>Check_Reserved_Unit</targetReference>
        </connector>
        <inputAssignments>
            <field>LineManager__c</field>
            <value>
                <elementReference>$Record.SalesManager__r.ManagerId</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>1464</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Check_Status</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SalesOrder__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>SalesOrderStatus__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Sold</stringValue>
            </value>
        </filters>
        <object>SalesOrderCancellation__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <scheduledPaths>
            <name>Sales_Order_Cancellation_Remainder_for_2_days</name>
            <connector>
                <targetReference>Reminder_notification_before_24hours_after_2days_approvals_of_extension</targetReference>
            </connector>
            <label>Sales Order Cancellation Remainder for 2 days</label>
            <offsetNumber>-1</offsetNumber>
            <offsetUnit>Days</offsetUnit>
            <recordField>ReservationExtension2daysapprovals__c</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <scheduledPaths>
            <name>Sales_Order_Cancellation_Remainder_for_7_days</name>
            <connector>
                <targetReference>Reminder_notification_before_24hours_after_7_days_approvals_of_extension</targetReference>
            </connector>
            <label>Sales Order Cancellation Remainder for 7 days</label>
            <offsetNumber>-1</offsetNumber>
            <offsetUnit>Days</offsetUnit>
            <recordField>ReservationExtension7daysapprovals__c</recordField>
            <timeSource>RecordField</timeSource>
        </scheduledPaths>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>NewSalesOrderStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
