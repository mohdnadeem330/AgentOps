<template>
  <!-- Modal only visible when triggered -->
  <template if:true={isModalOpen}>
    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading" aria-modal="true"
             aria-describedby="modal-content" class="slds-modal slds-fade-in-open" onkeydown={handleKeyDown}>
      <div class="slds-modal__container">

        <!-- ðŸ”¹ Modal Header -->
        <header class="slds-modal__header">
          <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                  title="Close" onclick={closeModal}>
            <lightning-icon icon-name="utility:close" alternative-text="Close" size="small"></lightning-icon>
            <span class="slds-assistive-text">Close</span>
          </button>
          <h2 id="modal-heading" class="slds-modal__title slds-hyphenate">
            Forgot Your Username
          </h2>
        </header>

        <!-- Modal Body / Instructions -->
        <div class="slds-modal__content slds-p-around_medium" id="modal-content">
          <p class="slds-text-body_regular slds-m-bottom_medium">
            Please enter your registered Email Address below. By clicking Submit, you'll receive your Username on your registered Email Address.
          </p>

          <!-- Email Input Field -->
           <div class="slds-form-element">
                <!--<lightning-input
                    type="email"
                    name="email"
                    data-id="email"
                    value={emailAddress}
                    onchange={handleEmailChange}
                    placeholder="Enter your email address"
                    required
                    class="customInput">
                </lightning-input>-->
                <lightning-input
                    type="email"
                    name="email"
                    data-id="email"
                    value={emailAddress}
                    onchange={handleEmailChange}
                    placeholder="Enter your email address"
                    class="slds-p-around_medium lgc-bg">
                </lightning-input>
           </div>

          <!-- Result Message (Success/Error) -->
          <template if:true={showResult}>
            <div class={resultClass} style="margin-top: 1rem;">
              <lightning-icon icon-name={resultIcon} size="small"></lightning-icon>
              <span class="slds-m-left_small">{resultMessage}</span>
            </div>
          </template>
        </div>

        <!--  Modal Footer: Buttons -->
        <footer class="slds-modal__footer">
          <button class="slds-button slds-button_neutral" onclick={closeModal}>Cancel</button>
            <template if:false={showResult}>
                <button class="slds-button slds-button_brand" onclick={handleSubmit} disabled={isSubmitDisabled}>
                    <template if:true={isLoading}>
                        <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
                    </template>
                    Submit
                </button>
            </template>
        </footer>

      </div>
    </section>

    <!-- Dimmed Background -->
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>
</template>