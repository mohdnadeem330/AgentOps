<template>
    <div class="main-container">
        <div class="page-header">
            <template if:false={userId}>
                <header class="slds-builder-header"> <img src={aldarLogo}> <a href={loginURL} class="backlink">Back to login</a></header>
            </template>
            <div class="slds-col slds-size_4-of-12">
            </div>

            <div class="page-title">
                <div class="title-text-container">
                    <p class="title-text">Agency Registration</p>
                    <p class="title-description">Kindly fill out the below information to register with Aldar
                        Properties.</p>
                </div>
                <div class="title-text-container">
                    <p> Already Tried Registering and Trouble getting in OTP?</p><a href="#"
                        onclick={navigateToGetOTP}>Get OTP</a>
                </div>
                <template if:true={getOTP}>
                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-02" aria-modal="true"
                        class="aldar-modal slds-modal slds-fade-in-open">
                        <div class="slds-modal__container">
                            <button onclick={closeOTP}
                                class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse  btnclose">
                                <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                                </svg> <span class="slds-assistive-text">Cancel and close</span> </button>
                            <div class="slds-modal__header">
                                <h1 id="modal-heading-02" class="slds-modal__title slds-hyphenate">Get OTP</h1>
                            </div>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2">
                                <lightning-input class="aldar-input with-label AgencyInformationSection"
                                    data-id="existinglicenseNumber" value={existinglicenseNumber}
                                    onchange={onchangeOfTradeLicenseNumber} label="Trade/Commercial License Number"
                                    required>
                                </lightning-input>
                                <template if:true={OTPMessage}>
                                    <p class="otp_error">{OTPMessage}</p>
                                </template>
                            </div>
                            <div class="slds-modal__footer">
                                <button onclick={resendOTPForTradeLicenseNumer} data-id="getOTP" class="otp-btn"
                                    aria-label="Get OTP">Get OTP</button>
                            </div>
                        </div>
                    </section>
                    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                </template>
                
                <div class="title-icon-container"> <img src={informationTooltipIcon} onclick={toggleMessageBox}
                        class="title-icon">
                    <div class="box arrow-top" if:true={showMessageBox}>
                        <div class="message-content-container">
                            <div class="message-content">
                                <div class="message-content-title title-1"> Registration Assistance </div>
                                <div class="message-content-description"> Aldar Properties is a leading real estate
                                    development management and investment company with headquarters in Abu Dhabi, UAE.
                                    Aldar Properties IT Department wants to develop a platform for brokers which contain
                                    the functionality required to a real estate broker related functionality. </div>
                            </div>
                            <div class="message-content">
                                <div class="message-content-title"> Abu Dhabi Office </div>
                                <div class="message-content-description">
                                    <!-- Added by Tharun on 30 March-->
                                    <template for:each={brokerAUHTeamArray} for:item="singleElement" for:index="index">
                                        <div key={singleElement.id}>
                                            <p>- {singleElement.fullName}: +971 {singleElement.mobile}</p>
                                        </div>
                                    </template>
                                    <!-- Added by Tharun on 30 March-->
                                </div>
                            </div>
                            <div class="message-content">
                                <div class="message-content-title">Dubai Office</div>
                                <div class="message-content-description">
                                    <!-- Added by Tharun on 30 March-->
                                    <template for:each={brokerDXBTeamArray} for:item="singleElement" for:index="index">
                                        <div key={singleElement.id}>
                                            <p>- {singleElement.fullName}: +971 {singleElement.mobile}</p>
                                        </div>
                                    </template>
                                    <!-- Added by Tharun on 30 March-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-body">
            <div class="left-side">
                <div class="slds-progress slds-progress_vertical">
                    <ol class="slds-progress__list orderd_list_container">
                        <li class="slds-progress__item agency-information" data-leftsideindex="1" onclick={openSection}
                            data-id="AgencyInformation">
                            <div class="not-active" data-notactiveindex="1"></div> <img src={completed}
                                class="completed-stage" data-completedstageindex="1"> <img src={currentStage}
                                style="display:inline-block" class="current-stage" data-currentstageindex="1">
                            <span class="item-progress-bar"></span>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread"
                                data-id="AgencyInformation">Agency Information</div>
                        </li>
                        <li class="slds-progress__item power-of-attorney" data-leftsideindex="2" onclick={openSection}
                            data-id="PowerOfAttorney">
                            <div class="not-active" data-notactiveindex="2"></div> <img src={completed}
                                class="completed-stage" data-completedstageindex="2"> <img src={currentStage}
                                class="current-stage" style="display:inline-block" data-currentstageindex="2">
                            <span class="item-progress-bar"></span>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread"
                                data-id="PowerOfAttorney">Power of Attorney</div>
                        </li>
                        <li class="slds-progress__item partner-owner-details" data-leftsideindex="3"
                            onclick={openSection} data-id="PartnerOwnerDetails">
                            <div class="not-active" data-notactiveindex="3"></div> <img src={completed}
                                class="completed-stage" data-completedstageindex="3"> <img src={currentStage}
                                class="current-stage" style="display:inline-block" data-currentstageindex="3">
                            <span class="item-progress-bar"></span>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread"
                                data-id="PartnerOwnerDetails">Partner/Owner Details</div>
                        </li>
                        <li class="slds-progress__item bank-details" data-leftsideindex="4" onclick={openSection}
                            data-id="BankDetails">
                            <div class="not-active" data-notactiveindex="4"></div> <img src={completed}
                                class="completed-stage" data-completedstageindex="4"> <img src={currentStage}
                                class="current-stage" style="display:inline-block" data-currentstageindex="4">
                            <span class="item-progress-bar"></span>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread"
                                data-id="BankDetails">Bank Details</div>
                        </li>
                        <li class="slds-progress__item agency-admin-information" data-leftsideindex="5"
                            onclick={openSection} data-id="AgencyAdminInformation">
                            <div class="not-active" data-notactiveindex="5"></div> <img src={completed}
                                class="completed-stage" data-completedstageindex="5"> <img src={currentStage}
                                class="current-stage" style="display:inline-block" data-currentstageindex="5">
                            <span class="item-progress-bar"></span>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread"
                                data-id="AgencyAdminInformation">Agency Admin Information</div>
                        </li>
                        <li class="slds-progress__item agency-admin-information" data-leftsideindex="6"
                            onclick={openSection} data-id="ReferredBy">
                            <div class="not-active" data-notactiveindex="6"></div> <img src={completed}
                                class="completed-stage" data-completedstageindex="6"> <img src={currentStage}
                                class="current-stage" style="display:inline-block" data-currentstageindex="6">
                            <span class="item-progress-bar"></span>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread"
                                data-id="ReferredBy">Referred By</div>
                        </li>
                        <li class="slds-progress__item authorized-signatory" data-leftsideindex="7"
                            onclick={openSection} data-id="AuthorizedSignatory">
                            <div class="not-active" data-notactiveindex="7"></div> <img src={completed}
                                class="completed-stage" data-completedstageindex="7"> <img src={currentStage}
                                class="current-stage" style="display:inline-block" data-currentstageindex="7">
                            <span class="item-progress-bar"></span>
                            <div class="slds-progress__item_content slds-grid slds-grid_align-spread"
                                data-id="AuthorizedSignatory">Authorized Signatory</div>
                        </li>
                    </ol>
                    <div aria-valuemin="0" aria-valuemax="100" aria-valuenow="25" role="progressbar"> <span
                            class="slds-assistive-text">Progress: 25%</span> </div>
                            <template if:true={hasNotes}>
                                <div class="left-side">
                                    <div class="slds-progress slds-progress_vertical note_left"
                                        style="max-width:350px ;margin-top:20px !important">
                                        <p>Dear Broker,</p>
                                        <br>
                                        <p>Please upload the mandatory documents mentioned below:</p>
                                        <br>
                                        <p>{notes}</p>
                                        <br>
                                        <p>Warm Regards,</p>
                                        <p>Broker Management</p>
                                        <p>Aldar Properties</p>
                                    </div>
                                </div>
                            </template>
                </div>
                
            </div>
            <div class="right-side reg_side">
                <div class="app slds-p-around_x-large">
                    <lightning-accordion allow-multiple-sections-open class="example-accordion" active-section-name={activeSections}>
                        <lightning-accordion-section name="AgencyInformation" class="slds-text-title_bold xx_accordianSection"
                            label="Agency Information" onclick={openSection} data-index=1 data-id="AgencyInformation"
                            data-scrollto="AgencyInformationST">
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="AgencyName" value={agencyName} onchange={handleChange}
                                        label="Agency Name" required disabled={readOnlyFields}> </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="EstablishmentDate" value={establishmentDate} onchange={handleChange}
                                        type="date" label="Establishment Date" disabled={readOnly} max={todaysDate}
                                        message-when-range-overflow="Date should be in the Past." format="dd/MM/yyyy"
                                        required> </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="LicenseNumber" value={licenseNumber} onchange={handleChange}
                                        label="Trade/Commercial License Number" disabled={readOnly} required>
                                    </lightning-input>
                                </div>

                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="ExpiryDate" value={expiryDate} onchange={handleChange} type="date"
                                        label="Expiry Date of the License" min={tomorrowDate}
                                        message-when-range-underflow="Date should be in the Future." disabled={readOnly}
                                        required> </lightning-input>
                                </div>
                                <div class="slds-col ">
                                    <div class="mobile_section">
                                        <lightning-combobox
                                            class="aldar-combo-box with-label country-code AgencyInformationSection"
                                            data-id="phoneNumberCountryCode" options={phoneNumberCountryCode}
                                            value="971" label="Phone Number" onchange={handleChange} required disabled={readOnly}
                                            style="width: 110px"> </lightning-combobox>
                                        <lightning-input
                                            class="aldar-input with-label aldar-with-code-country-input AgencyInformationSection"
                                            type="tel" data-id="PhoneNumber" value={phoneNumber} onchange={handleChange} onblur={handlePhoneNumberBlur}
                                            disabled={readOnly} required style="width:calc(100% - 110px)">
                                        </lightning-input>
                                    </div>
                                </div>
                                <div class="slds-col ">
                                    <!-- Updated By Moh Sarfaraj for BPE-120 -->
                                    <lightning-input class="aldar-input with-label AgencyInformationSection emailValidation"
                                        type="email" name="CompanyEmail" id="CompanyEmail" data-id="CompanyEmail"
                                        value={companyEmail} onchange={handleChange} onblur={handleEmailBlur} label="Company Email"
                                        disabled={readOnlyFields} required> </lightning-input>
                                </div>

                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="AddressLine1" value={addressLine1} onchange={handleChange}
                                        label="Address Line 1" disabled={readOnly} required> </lightning-input>
                                </div>
                                <div class="slds-col ">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="AddressLine2" value={addressLine2} onchange={handleChange}
                                        label="Address Line 2" disabled={readOnly} required> </lightning-input>
                                </div>
                                <div class="slds-col ">
                                    <template if:true={CountryPicklist.data}>
                                        <lightning-combobox class="aldar-combo-box with-label AgencyInformationSection custCountry"
                                            data-id="Country" value={country} onchange={handleChange} label="Country"
                                            options={CountryPicklist.data.values} disabled={readOnly} required>
                                        </lightning-combobox>
                                    </template>
                                </div>

                                <div class="slds-col">
                                    <lightning-combobox class="aldar-combo-box with-label AgencyInformationSection"
                                        data-id="State" options={validStates} value={state} label="State"
                                        onchange={handleChange} disabled={readOnly} required> </lightning-combobox>
                                </div>
                                <div class="slds-col ">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="City" value={city} onchange={handleChange} label="City"
                                        disabled={readOnly} required> </lightning-input>
                                </div>
                                <div class="slds-col ">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection"
                                        data-id="POBox" value={poBox} onchange={handleChange} label="P.O Box"
                                        disabled={readOnly} required> </lightning-input>
                                </div>

                                <div class="slds-col">
                                    <!-- <span><img src={infoIcon} ></span> -->
                                    <lightning-combobox class="aldar-combo-box with-label"
                                        data-id="agencyCategory" onchange={handleChange}
                                        label="Agency Category" options={agencyCategoryOptions}
                                        required value={agencyCategoryValue}
                                        > </lightning-combobox>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyInformationSection" data-id="Website" value={website}
                                        onchange={handleChange} disabled={readOnly} label="Website"> </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-combobox class="aldar-combo-box with-label"
                                        data-id="fiabciRegistred" value={fiabciRegistredValue} onchange={handleChange}
                                        label="FIABCI Registered" options={fiabciRegistredOptions} 
                                        field-level-help="Federation Internationale des Administrateurs de Bien-Conselis Immobiliers"
                                        required> </lightning-combobox>
                                </div>

                                <div class="slds-col ">
                                    <lightning-combobox class="aldar-combo-box with-label"
                                        data-id="fiabciStatus" value={fiabciStatusValue} onchange={handleChange}
                                        label="FIABCI Status" options={fiabciStatusOptions}
                                        disabled={disabledFiabciStatus}
                                        required={requiredFiabciStatus}
                                        > </lightning-combobox>
                                </div>
                                <div class="slds-col">
                                   
                                </div>
                                <div class="slds-col">
                                    
                                </div>
                                <div class="slds-col slds-box">
                                    <lightning-dual-listbox
                                        data-id="InterestedPropoertyLocations"
                                        label="Interested Property Locations"
                                        source-label="Available"
                                        selected-label="Selected"
                                        options={wiredIntPropLocations}
                                        onchange={handleChange}
                                        variant = "label-stacked"
                                        value={gotSelectedIntPropLocation}
                                        required>
                                    </lightning-dual-listbox>
                                </div>
                                
                            </div>

                            

                            <div class="slds-p-top_x-large slds-p-left-large">
                                <label class="slds-text-title_bold">Attachments
                                    <label class="slds-text-title">(max file size for each attachment should be 2
                                        MB)</label>
                                </label>
                            </div>


                            <div class="attachments_container">

                                <div class="upload-main-container">

                                    <template if:true={requiredForInternational}><span class="upload-label">Go AML
                                            Certificate* <br>
                                            <lightning-formatted-url style="font-size: smaller"
                                                value={GoAMLLink}
                                                tooltip="register for Goaml" label="Visit To Register for Goaml"
                                                target="_blank"></lightning-formatted-url>
                                        </span>
                                    </template>
                                    <template if:false={requiredForInternational}><span class="upload-label">Go AML
                                            Certificate <br>
                                            <lightning-formatted-url style="font-size: smaller"
                                                value={GoAMLLink}
                                                tooltip="register for Goaml" label="Visit To Register for Goaml"
                                                target="_blank"></lightning-formatted-url>
                                        </span>
                                    </template>

                                    <lightning-input class="aldar-upload-field AgencyInformationSection" type="file"
                                        accept={acceptedFormats} data-id="GoAMLCertificate" onchange={openfileUpload}
                                        multiple="true" value={goAMLCertificate} disabled={readOnly}
                                        required={requiredForInternational}> </lightning-input>
                                    <template if:true={goAMLCertificate}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={goAMLCertificate} for:item="file">
                                                <div key={file.filename} class="uploaded-file-item"> <img
                                                        src={uploadeFileIcon} class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file.filename}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile}
                                                        data-id={file.filename} data-listname="goAMLCertificate"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                                <div class="upload-main-container">
                                    <div class="mutiple-lines-label"> <span class="upload-label">Company
                                            Profile/Brochure/Catalogue</span> </div>
                                    <lightning-input class="aldar-upload-field" type="file" accept={acceptedFormats}
                                        data-id="CompanyProfileBrochureCatalogue" onchange={openfileUpload}
                                        multiple="true" disabled={readOnly}> </lightning-input>
                                    <template if:true={companyProfileBrochureCatalogue}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={companyProfileBrochureCatalogue} for:item="file">
                                                <div key={file.filename} class="uploaded-file-item"> <img
                                                        src={uploadeFileIcon} class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file.filename}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile}
                                                        data-id={file.filename}
                                                        data-listname="companyProfileBrochureCatalogue"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                                <div class="upload-main-container">
                                    <div class="mutiple-lines-label"> <span class="upload-label">Attach Trade
                                            License*</span> </div>
                                    <lightning-input class="aldar-upload-field AgencyInformationSection" type="file"
                                        name="AttachTradeLicence*" accept={acceptedFormats} data-id="AttachTradeLicence"
                                        onchange={openfileUpload} multiple="true" disabled={readOnly}
                                        required={makerequired}> </lightning-input>
                                    <template if:true={attachTradeLicence}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={attachTradeLicence} for:item="file">
                                                <div key={file.filename} class="uploaded-file-item"> <img
                                                        src={uploadeFileIcon} class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file.filename}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile}
                                                        data-id={file.filename} data-listname="attachTradeLicence"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                                <div class="slds-grid slds-gutters">
                                    <!--div class="slds-col"-->
                                        <lightning-combobox class="aldar-combo-box with-label"
                                            data-id="vatRegistration" onchange={handleChange}
                                            label="VAT*" options={vatOptions}
                                            required value={vatValue}></lightning-combobox>
                                    <!--/div-->
                                </div>
                                <template if:true={showVatCertificate}>
                                    <div class="upload-main-container">
                                        <div class="mutiple-lines-label"> <span class="upload-label">VAT Registration
                                            Certificate* <br>
                                            <lightning-input class="aldar-input with-label AgencyInformationSection"
                                                  data-id="TaxRegistrationCertificate" value={taxRegistrationCertificate}
                                                   onchange={handleChange} label="Tax Registration Number*" disabled={readOnly}
                                                  required={showVatCertificate} title="If VAT not known/not applicable, please enter 0000">
                                           </lightning-input>

                                           <lightning-input class="aldar-input with-label AgencyInformationSection"
                                            data-id="vatStartDate" value={vatStartDateValue} onchange={handleChange}
                                            type="date" label="Registartion Start Date" disabled={readOnly}  format="dd/MM/yyyy"
                                            required> </lightning-input>

                                            <lightning-input class="aldar-input with-label AgencyInformationSection"
                                                data-id="vatEndDate" value={vatEndDateValue} onchange={handleChange}
                                                type="date" label="Registartion End Date" disabled={readOnly} min={vatStartDateValue}
                                                message-when-range-overflow="Date should be in the future." format="dd/MM/yyyy"
                                                required> </lightning-input> 
                                                
                                        </span> </div>
                                        <lightning-input class="aldar-upload-field AgencyInformationSection" type="file"
                                            accept={acceptedFormats} data-id="VATRegistrationCertificate"
                                            onchange={openfileUpload} multiple="true" disabled={readOnly}> </lightning-input>

                                            
                                            <!--lightning-input class="aldar-input with-label AgencyInformationSection"
                                                                data-id="UAEVATRegistrationNumber" value={UAEVATRegistrationNumber} onchange={handleChange}
                                                                label="UAE VAT Registration Number	" required disabled={readOnlyFields}> </lightning-input-->

                                        <template if:true={vatRegistrationCertificate}>
                                            <div class="uploaded-file-names-container">
                                                <template for:each={vatRegistrationCertificate} for:item="file">
                                                    <div key={file.filename} class="uploaded-file-item"> <img
                                                            src={uploadeFileIcon} class="uploaded-file-icon">
                                                        <p class="uploaded-file-name-txt">{file.filename}</p>
                                                        <a class="remove-file-wrapper" onclick={removeFile}
                                                            data-id={file.filename}
                                                            data-listname="vatRegistrationCertificate"><img
                                                                src={deleteFileIcon}></a>
                                                    </div>
                                                </template>
                                            </div>
                                        </template>
                                    </div>
                                </template>
                                <template if:true={showVatUndertakingCertificate}>
                                    <div class="upload-main-container">
                                        <div class="mutiple-lines-label"> <span class="upload-label">VAT Undertaking
                                                Certificate* <br> <a style="font-size: smaller"
                                                    onclick={downloadVAT}>Download VAT Letter Template</a> <br>
                                                    (sign and upload)<br>
                                            </span> </div>
                                        <lightning-input class="aldar-upload-field AgencyInformationSection" type="file"
                                            accept={acceptedFormats} data-id="VATRegistrationCertificate"
                                            onchange={openfileUpload} multiple="true" disabled={readOnly}
                                            required={makerequired}> </lightning-input>
                                        <template if:true={vatRegistrationCertificate}>
                                            <div class="uploaded-file-names-container">
                                                <template for:each={vatRegistrationCertificate} for:item="file">
                                                    <div key={file.filename} class="uploaded-file-item"> <img
                                                            src={uploadeFileIcon} class="uploaded-file-icon">
                                                        <p class="uploaded-file-name-txt">{file.filename}</p>
                                                        <a class="remove-file-wrapper" onclick={removeFile}
                                                            data-id={file.filename}
                                                            data-listname="vatRegistrationCertificate"><img
                                                                src={deleteFileIcon}></a>
                                                    </div>
                                                </template>
                                            </div>
                                        </template>
                                    </div>
                                </template>
                                <!--ADM/RERA start-->
                                <div class="upload-main-container">

                                    <template if:true={isADM_RERARequired}><span class="upload-label">ADM / RERA
                                            Certificate* <br>
                                        </span>
                                    </template>
                                    <template if:false={isADM_RERARequired}><span class="upload-label">ADM / RERA
                                            Certificate <br>
                                        </span>
                                    </template>

                                    <lightning-input class="aldar-upload-field AgencyInformationSection" type="file"
                                        accept={acceptedFormats} data-id="ADMRERACertificate" onchange={openfileUpload}
                                        multiple="true" value={ADMRERACertificate} disabled={readOnly}
                                        required={isADM_RERARequired}> </lightning-input>
                                    <template if:true={ADMRERACertificate}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={ADMRERACertificate} for:item="file">
                                                <div key={file.filename} class="uploaded-file-item"> <img
                                                        src={uploadeFileIcon} class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file.filename}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile}
                                                        data-id={file.filename} data-listname="ADMRERACertificate"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                                <!--ADM/RERA end-->
                            </div>
                        </lightning-accordion-section>
                        <lightning-accordion-section name="PowerOfAttorney" class="slds-text-title_bold xx_accordianSection"
                            onclick={openSection} data-index=2 data-id="PowerOfAttorney"
                            data-scrollto="PowerOfAttorneyST" label="Power of Attorney">
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col ">
                                    <template if:true={titlePicklist.data}>
                                        <lightning-combobox class="aldar-combo-box with-label PowerOfAttorneySection"
                                            data-id="AttorneyTitle" value={attorneyTitle} onchange={handleChange}
                                            label="Title" options={titlePicklist.data.values} disabled={readOnly}
                                            required> </lightning-combobox>
                                    </template>
                                </div>
                                <div class="slds-col ">
                                    <lightning-input class="aldar-input with-label PowerOfAttorneySection"
                                        data-id="NameOfPOA" value={nameOfPOA} onchange={handleChange}
                                        label="Name of POA" disabled={readOnly} required> </lightning-input>
                                </div>
                            </div>
                            <div class="slds-p-top_x-large slds-p-left-large">
                                <label class="slds-text-title_bold">Attachments
                                    <label class="slds-text-title">(max file size for each attachment should be 2
                                        MB)</label>
                                </label>
                            </div>

                            <div class="attachments_container">
                                <div class="upload-main-container"> <span class="upload-label">Emirates ID/
                                        Passport copy of POA*</span>
                                    <lightning-input class="aldar-upload-field PowerOfAttorneySection" type="file"
                                        data-id="EmiratesIDPassportcopyofPOA" accept={acceptedFormats}
                                        onchange={openfileUpload} multiple="true" disabled={readOnly}
                                        required={makerequired}> </lightning-input>
                                    <template if:true={emiratesIDPassportcopyofPOA}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={emiratesIDPassportcopyofPOA} for:item="file">
                                                <div key={file.filename} class="uploaded-file-item"> <img
                                                        src={uploadeFileIcon} class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file.filename}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile}
                                                        data-id={file.filename}
                                                        data-listname="emiratesIDPassportcopyofPOA"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                                <div class="upload-main-container"> <span class="upload-label">Memorandum of
                                        Association/Power of Attorney*</span>
                                    <lightning-input class="aldar-upload-field PowerOfAttorneySection" type="file"
                                        data-id="MemorandumofAssociationPowerofAttorney" accept={acceptedFormats}
                                        onchange={openfileUpload} multiple="true" disabled={readOnly}
                                        required={makerequired}> </lightning-input>
                                    <template if:true={memorandumofAssociationPowerofAttorney}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={memorandumofAssociationPowerofAttorney} for:item="file">
                                                <div key={file.filename} class="uploaded-file-item"> <img
                                                        src={uploadeFileIcon} class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file.filename}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile}
                                                        data-id={file.filename}
                                                        data-listname="memorandumofAssociationPowerofAttorney"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </lightning-accordion-section>
                        <lightning-accordion-section name="PartnerOwnerDetails" class="slds-text-title_bold xx_accordianSection"
                            onclick={openSection} data-index=3 data-id="PartnerOwnerDetails"
                            data-scrollto="PartnerOwnerDetailsST" label="Partner/Owner Details">
                            <!-- Added By Moh Sarfaraj for BPE-110 starts -->
                            <div class="slds-grid slds-gutters" style="display: block; text-align: left;">
                                 <div class="slds-notify slds-notify_alert slds-m-top_medium" role="alert">
                                    <h2>Registration submission OTP will be sent to the Primary Owner's Email address.</h2>
                                 </div>
                            </div>
                            <!-- Added By Moh Sarfaraj for BPE-110 end -->
                            <div class="slds-grid slds-gutters" style="display: block; text-align: right;">
                                <div class="slds-col slds-size_12-of-12 add-btn-container">
                                    <button class="otp-btn" slot="actions" title="Add" onclick={addPartnerOwner}
                                        disabled={readOnly}>ADD</button>
                                </div>
                            </div>
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <template if:true={titlePicklist.data}>
                                        <lightning-combobox
                                            class="aldar-combo-box with-label PartnerOwnerDetailsSection"
                                            data-id="OwnerTitle" value={ownerTitle} onchange={handleChange}
                                            label="Title" options={titlePicklist.data.values} disabled={readOnly}
                                            required> </lightning-combobox>
                                    </template>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                        data-id="OwnerName" value={ownerName} onchange={handleChange} label="Name"
                                        disabled={readOnly} required> </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <template if:true={CountryPicklist.data}>
                                        <lightning-combobox
                                            class="aldar-combo-box with-label PartnerOwnerDetailsSection"
                                            data-id="OwnerCountry" value={ownerCountry} onchange={handleChange}
                                            label="Country" options={CountryPicklist.data.values} disabled={readOnly}
                                            required> </lightning-combobox>
                                    </template>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                        data-id="PartnerOwnerDetails" value={partnerOwnerDetails}
                                        onchange={handleChange} label="Partner/Owner Details" disabled={readOnly}
                                        required> </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                        type="number" data-id="ShareHoldingPercentage" value={shareHoldingPercentage}
                                        min="0" max="100" onchange={handleChange} label="Share Holding Percentage"
                                        disabled={readOnly} required> </lightning-input>
                                </div>

                                <!-- Added by Tharun as per BPE-109 -->
                                <div class="slds-col">
                                    <div class="mobile_section">
                                        <lightning-combobox
                                            class="aldar-combo-box with-label country-code PartnerOwnerDetailsSection"
                                            data-id="ownerMobCountryCode" options={phoneNumberCountryCode}
                                            onchange={handleChange} value={ownerMobCountryCode} disabled={readOnly}
                                            label="Owner Mobile Number" required style="width:110px;"> </lightning-combobox>
                                        <lightning-input
                                            class="aldar-input with-label aldar-with-code-country-input PartnerOwnerDetailsSection"
                                            type="tel" data-id="ownerMobileNumber" onblur={handlePhoneNumberBlur}
                                            value={ownerMobileNumber} onchange={handleChange}
                                            disabled={readOnly} required style="width: calc(100% - 110px);">
                                        </lightning-input>
                                    </div>
                                </div>
                                <div class="slds-col">
                                    <!-- HANDLE EMAILBLUR TO ACCEPT COMPANY DOMAINS -->
                                    <!-- TOBE CHANGED BY SARFARAJ in SPRINT 6 -->
                                    <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                        type="email" data-id="ownerEmailAddress" value={ownerEmail}
                                        onchange={handleChange} onblur={handleEmailBlur} label="Owner Email Address"
                                        disabled={readOnly} required>
                                    </lightning-input>
                                    <!-- HANDLE EMAILBLUR TO ACCEPT COMPANY DOMAINS -->
                                    <!-- TOBE CHANGED BY SARFARAJ in SPRINT 6 -->
                                </div>
                                <!-- Added by Tharun as per BPE-109 -->
                                <!--Added By Moh Sarfaraj for BPE-110 starts-->
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                                type="checkbox" data-id="primaryOwner" checked={primaryOwner}
                                                label="Primary Owner" onchange={handlePrimaryOwner}
                                                data-item="PrimaryOwner" disabled={readOnly} >
                                    </lightning-input>
                                </div>
                                 <!--Added By Moh Sarfaraj for BPE-110 end -->
                            </div>
                            <div class="slds-p-top_x-large slds-p-left-large">
                                <label class="slds-text-title_bold">Attachments
                                    <label class="slds-text-title">(max file size for each attachment should be 2
                                        MB)</label>
                                </label>
                            </div>
                            <div class="attachments_container">
                                <div class="upload-main-container"> <span class="upload-label">Emirates ID/
                                        Passport copy of Partner/Owner*</span>
                                    <lightning-input class="aldar-upload-field PartnerOwnerDetailsSection" type="file"
                                        accept={acceptedFormats} data-id="EmiratesIDPassportcopyofPartnerOwner"
                                        onchange={openfileUpload} multiple="true" disabled={readOnly}
                                        required={makerequired}>
                                    </lightning-input>
                                    <template if:true={firstPartnersOwnerFiles}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={firstPartnersOwnerFiles} for:item="file">
                                                <div key={file} class="uploaded-file-item"> <img src={uploadeFileIcon}
                                                        class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile} data-id={file}
                                                        data-listname="emiratesIDPassportcopyofPartnerOwner"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                            </div>
                            <template for:each={partnersOwners} for:item="partnerOwner">
                                <div key={partnerOwner.Id}>
                                    <div class="slds-grid slds-gutters">
                                        <div class="slds-col">
                                            <template if:true={titlePicklist.data}>
                                                <lightning-combobox
                                                    class="aldar-combo-box with-label PartnerOwnerDetailsSection"
                                                    data-id="partnerOwner.Id" value={partnerOwner.title}
                                                    onchange={partnerOwnerChange} label="Title"
                                                    options={titlePicklist.data.values} disabled={readOnly} required>
                                                </lightning-combobox>
                                            </template>
                                        </div>
                                        <div class="slds-col">
                                            <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                                data-id={partnerOwner.Id} data-item="OwnerName"
                                                value={partnerOwner.ownerName} onchange={partnerOwnerChange}
                                                label="Name" disabled={readOnly} required>
                                            </lightning-input>
                                        </div>
                                        <template if:true={CountryPicklist.data}>
                                            <div class="slds-col">
                                                <lightning-combobox
                                                    class="aldar-combo-box with-label PartnerOwnerDetailsSection"
                                                    key={partnerOwner.Id} data-item="OwnerCountry"
                                                    data-id={partnerOwner.Id} value={partnerOwner.ownerCountry}
                                                    onchange={partnerOwnerChange} label="Country"
                                                    options={CountryPicklist.data.values} disabled={readOnly} required>
                                                </lightning-combobox>
                                            </div>
                                        </template>
                                        <div class="slds-col ">
                                            <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                                key={partnerOwner.Id} data-item="PartnerOwnerDetails"
                                                data-id={partnerOwner.Id} value={partnerOwner.partnerOwnerDetails}
                                                onchange={partnerOwnerChange} label="Partner/Owner Details"
                                                disabled={readOnly} required>
                                            </lightning-input>
                                        </div>
                                        <div class="slds-col ">
                                            <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                                key={partnerOwner.Id} type="number" data-item="ShareHoldingPercentage"
                                                data-id={partnerOwner.Id} value={partnerOwner.shareHoldingPercentage}
                                                onchange={partnerOwnerChange} label="Share Holding Percentage"
                                                disabled={readOnly} required>
                                            </lightning-input>
                                        </div>

                                        <!-- Added by Tharun as per BPE-109 -->
                                        <div class="slds-col">
                                            <div class="mobile_section">
                                                <lightning-combobox
                                                    class="aldar-combo-box with-label country-code PartnerOwnerDetailsSection"
                                                    data-id={partnerOwner.Id} data-item="OwnerCountryCode" 
                                                    options={phoneNumberCountryCode} 
                                                    onchange={partnerOwnerChange} value={partnerOwner.ownerMobileCountryCode}
                                                    label="Owner Mobile Number" disabled={readOnly} required style="width:110px;">
                                                </lightning-combobox>
                                                <template if:true={partnerOwner}>
                                                    <lightning-input
                                                        class="aldar-input with-label aldar-with-code-country-input PartnerOwnerDetailsSection"
                                                        type="tel" data-id={partnerOwner.Id} data-item="OwnerMobileNumber"
                                                        onblur={handlePhoneNumberBlur}
                                                        value={partnerOwner.ownerMobile} onchange={partnerOwnerChange}
                                                        disabled={readOnly} required style="width: calc(100% - 110px);">
                                                    </lightning-input>
                                                </template>
                                            </div>
                                        </div>
                                        <div class="slds-col">
                                            <!-- HANDLE EMAILBLUR TO ACCEPT COMPANY DOMAINS -->
                                            <!-- TOBE CHANGED BY SARFARAJ in SPRINT 6 -->
                                            <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                                type="email" data-id={partnerOwner.Id} value={partnerOwner.ownerEmailAddress}
                                                onchange={partnerOwnerChange} onblur={handleEmailBlurMulti} label="Owner Email Address"
                                                data-item="OwnerEmailAddress" disabled={readOnly} required>
                                            </lightning-input>
                                            <!-- HANDLE EMAILBLUR TO ACCEPT COMPANY DOMAINS -->
                                            <!-- TOBE CHANGED BY SARFARAJ in SPRINT 6 -->
                                        </div>
                                        <!-- Added by Tharun as per BPE-109 -->
                                        <!-- Added By Moh Sarfaraj for BPE-110 start -->
                                        <div class="slds-col">
                                            <lightning-input class="aldar-input with-label PartnerOwnerDetailsSection"
                                                type="checkbox" data-id={partnerOwner.Id} checked={partnerOwner.primaryOwner}
                                                label="Primary Owner" onchange={handlePrimaryOwner}
                                                data-item="PrimaryOwnerMulti" disabled={readOnly} >
                                            </lightning-input>
                                        </div>
                                        <div class="slds-col"></div>
                                        <div class="slds-col">
                                            <template if:true={multiPartnerOwner}> &nbsp;&nbsp;
                                                <div class="slds-col" key={partnerOwner.Id}>
                                                    <div key={partnerOwner.Id} class="slds-truncate" title="Remove"
                                                        id={partnerOwner.Id} data-item={partnerOwner.Id}
                                                        data-id={partnerOwner.Id} onclick={removePartnerOwner}>
                                                        <button class="otp-btn" style="margin-top: .5rem;"
                                                            data-item={partnerOwner.Id}>Remove </button>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                        <!-- Added By Moh Sarfaraj for BPE-110 end-->
                                    </div>
                                </div>
                                <div class="slds-p-top_x-large slds-p-left-large" key={partnerOwner.Id}>
                                    <label class="slds-text-title_bold">Attachments
                                        <label class="slds-text-title">(max file size for each attachment should be 2
                                            MB)</label>
                                    </label>
                                </div>
                                <div class="slds-col slds-size_12-of-12" key={partnerOwner.Id}>
                                    <div class="attachments_container">
                                        <div class="upload-main-container"> <span class="upload-label">Emirates ID/
                                                Passport copy of Partner/Owner*</span>
                                            <lightning-input class="aldar-upload-field PartnerOwnerDetailsSection"
                                                type="file" accept={acceptedFormats}
                                                data-id="EmiratesIDPassportcopyofPartnerOwner" name={partnerOwner.Id}
                                                onchange={openfileUpload} multiple="true" disabled={readOnly}
                                                required={makerequired}> </lightning-input>
                                            <template if:true={partnerOwner.filename}>
                                                <div class="uploaded-file-names-container">
                                                    <div class="uploaded-file-item"> <img src={uploadeFileIcon}
                                                            class="uploaded-file-icon">
                                                        <p class="uploaded-file-name-txt">{partnerOwner.filename}</p>
                                                        <a class="remove-file-wrapper" onclick={removeFile}
                                                            data-id={partnerOwner.filename} data-index={partnerOwner.Id}
                                                            name={partnerOwner.Id}
                                                            data-listname="emiratesIDPassportcopyofPartnerOwner"><img
                                                                src={deleteFileIcon}></a>
                                                    </div>
                                                </div>
                                            </template>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </lightning-accordion-section>
                        <lightning-accordion-section name="BankDetails" class="slds-text-title_bold xx_accordianSection"
                            label="Bank Details" onclick={openSection} data-index=4 data-id="BankDetails"
                            data-scrollto="BankDetailsST">
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label BankDetailsSection"
                                        data-id="BankName" value={bankName} onchange={handleChange} label="Bank Name"
                                        disabled={readOnly}> 
                                    </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label BankDetailsSection"
                                        data-id="IBANNumber" value={IBANNumber} onchange={handleChange}
                                        label="IBAN Number" disabled={readOnly}>
                                    </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label BankDetailsSection"
                                        data-id="BankAccNumber" value={BankAccNumber} onchange={handleChange}
                                        label="Account Number" disabled={readOnly}>
                                    </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label BankDetailsSection"
                                        data-id="SwiftCode" value={swiftCode} onchange={handleChange} 
                                        label="Swift Code" disabled={readOnly}> 
                                    </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <template if:true={CountryPicklist.data}>
                                        <lightning-combobox class="aldar-combo-box with-label BankDetailsSection"
                                            data-id="bankCountry" value={bankCountry} onchange={handleChange} 
                                            label="Bank Country" options={CountryPicklist.data.values} 
                                            disabled={readOnly}>
                                        </lightning-combobox>
                                    </template>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label BankDetailsSection"
                                        data-id="BranchAddress" value={branchAddress} onchange={handleChange}
                                        label="Branch Address" disabled={readOnly}> 
                                    </lightning-input>
                                </div>
                            </div>
                            <div class="slds-p-top_x-large slds-p-left-large">
                                <label class="slds-text-title_bold">Attachments
                                    <label class="slds-text-title"> (max file size for each attachment should be 2
                                        MB)</label>
                                </label>
                            </div>
                            <div class="attachments_container">
                                <div class="upload-main-container">
                                    <span class="upload-label">Signed bank copy(Please submit a letter from the bank or provide bank details on the company letterhead)</span>
                                    <lightning-input class="aldar-upload-field BankDetailsSection" type="file"
                                        accept={acceptedFormats} data-id="SignedBankCopy" onchange={openfileUpload}
                                        multiple="true" disabled={readOnly}>
                                    </lightning-input>
                                    <template if:true={signedBankCopy}>
                                        <div class="uploaded-file-names-container">
                                            <template for:each={signedBankCopy} for:item="file">
                                                <div key={file.filename} class="uploaded-file-item"> <img
                                                        src={uploadeFileIcon} class="uploaded-file-icon">
                                                    <p class="uploaded-file-name-txt">{file.filename}</p>
                                                    <a class="remove-file-wrapper" onclick={removeFile}
                                                        data-id={file.filename} data-listname="signedBankCopy"><img
                                                            src={deleteFileIcon}></a>
                                                </div>
                                            </template>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </lightning-accordion-section>
                        <lightning-accordion-section name="AgencyAdminInformation" class="slds-text-title_bold xx_accordianSection"
                            label="Agency Admin Information" onclick={openSection} data-index=5
                            data-id="AgencyAdminInformation" data-scrollto="AgencyAdminInformationST">
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <template if:true={titlePicklist.data}>
                                        <lightning-combobox
                                            class="aldar-combo-box with-label AgencyAdminInformationSection"
                                            data-id="AgencyTitle" value={agencyTitle} onchange={handleChange}
                                            label="Title" options={titlePicklist.data.values}
                                            disabled={agencyAdminReadOnly} required> </lightning-combobox>
                                    </template>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyAdminInformationSection"
                                        data-id="ContactPersonName" value={contactPersonName} onchange={handleChange}
                                        label="Contact First Name" disabled={agencyAdminReadOnly} required>
                                    </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyAdminInformationSection"
                                        data-id="ContactMiddleName" value={contactMiddleName} onchange={handleChange}
                                        label="Contact Middle Name" disabled={agencyAdminReadOnly}> </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyAdminInformationSection"
                                        data-id="ContactLastName" value={contactLastName} onchange={handleChange}
                                        label="Contact Last Name" disabled={agencyAdminReadOnly} required>
                                    </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <div class="mobile_section">
                                        <lightning-combobox
                                            class="aldar-combo-box with-label country-code AgencyAdminInformationSection"
                                            data-id="ContactPersonCountryCode" options={phoneNumberCountryCode}
                                            onchange={handleChange} value={contactPersonCountryCode} disabled={agencyAdminReadOnly}
                                            label="Phone Number" required style="width:110px ;"> </lightning-combobox>
                                        <lightning-input
                                            class="aldar-input with-label aldar-with-code-country-input contact-person-field AgencyAdminInformationSection"
                                            type="tel" data-id="ContactPersonMobileNumber"   onblur={handlePhoneNumberBlur}
                                            value={contactPersonMobileNumber} onchange={handleChange}
                                            disabled={agencyAdminReadOnly} required style="width: calc(100% - 110px);">
                                        </lightning-input>
                                    </div>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyAdminInformationSection"
                                        type="email" data-id="ContactPersonEmailID" value={contactPersonEmailID}
                                        onchange={handleChange} onblur={handleEmailBlur} label="Contact Person Email ID"
                                        disabled={readOnlyFields} required> </lightning-input>

                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AgencyAdminInformationSection"
                                        data-id="DateofBirth" value={dateofBirth} onchange={handleChange}
                                        label="Date of Birth" type="date" disabled={agencyAdminReadOnly}
                                        message-when-range-overflow="Age Should be More Than 18." required>
                                    </lightning-input>
                                </div>
                                <div class="slds-col"></div>
                            </div>
                        </lightning-accordion-section>
                        <lightning-accordion-section name="ReferredBy" class="slds-text-title_bold xx_accordianSection" label="Referred By"
                            onclick={openSection} data-index=6 data-id="ReferredBy" data-scrollto="ReferredByST">
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <template if:true={titlePicklist.data}>
                                        <lightning-combobox class="aldar-combo-box with-label" data-id="ReferredByTitle"
                                            value={referredByTitle} onchange={handleChange} label="Title"
                                            options={titlePicklist.data.values} disabled={readOnly}>
                                        </lightning-combobox>
                                    </template>
                                </div>
                                <div class="slds-col">
                                    <template if:true={referredByoptions}>
                                        <lightning-combobox class="aldar-combo-box with-label" data-id="ReferredBy"
                                            value={referredBy} onchange={handleChange} label="Referred By"
                                            options={referredByoptions} disabled={readOnly} required>
                                        </lightning-combobox>
                                    </template>
                                </div>
                            </div>
                        </lightning-accordion-section>
                        <lightning-accordion-section name="AuthorizedSignatory" class="slds-text-title_bold xx_accordianSection"
                            label="Authorized Signatory" onclick={openSection} data-index=7
                            data-id="AuthorizedSignatory" data-scrollto="AuthorizedSignatoryST">
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col">
                                    <template if:true={titlePicklist.data}>
                                        <lightning-combobox
                                            class="aldar-combo-box with-label AuthorizedSignatorySection"
                                            data-id="AuthorizedSignatoryTitle" value={authorizedSignatoryTitle}
                                            onchange={handleChange} label="Title" options={titlePicklist.data.values}
                                            disabled={readOnly} required> </lightning-combobox>
                                    </template>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AuthorizedSignatorySection"
                                        data-id="AuthorizedSignatoryName" value={authorizedSignatoryName}
                                        onchange={handleChange} label="Name" disabled={readOnly} required>
                                    </lightning-input>
                                </div>
                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AuthorizedSignatorySection"
                                        data-id="Designation" value={designation} onchange={handleChange}
                                        label="Designation" disabled={readOnly} required> </lightning-input>
                                </div>

                                <div class="slds-col">
                                    <lightning-input class="aldar-input with-label AuthorizedSignatorySection"
                                        data-id="AuthorizedSignatoryEmail" value={authorizedSignatoryEmail}
                                        onchange={handleChange} onblur={handleEmailBlur} label="Email" disabled={readOnly} required>
                                    </lightning-input>
                                </div>
                            </div>
                        </lightning-accordion-section>
                    </lightning-accordion>
                   
                    <!-- Added By Moh Sarfaraj for BPE-197 for Terms and Conditions starts -->
                    <template if:true={showTermsAndConditions}>
                        <c-broker-terms-and-conditions-modal ontermsconditions={handleTAndCEvent}></c-broker-terms-and-conditions-modal>
                    </template>
                    <!-- Added By Moh Sarfaraj for BPE-197 for Terms and Conditions end -->

                    <!--div class="slds-p-around_medium lgc-bg">
                        <input type="checkbox" id="tc1" checked={tcSelectedValue1} name="tc1" onchange={handleChange} required="required"></input>
                        <label for="terms" style="display: inline;" class="slds-form-element__label"> Yes, by creating an account I agree to the 
                            <a> Terms and Service 1.</a></label> <br/>
                        
                        <input type="checkbox" id="tc2" checked={tcSelectedValue2} name="tc2" onchange={handleChange} required="required"></input>
                        <label for="terms" style="display: inline;" class="slds-form-element__label"> Yes, by creating an account I agree to the 
                            <a> Terms and Service 2.</a></label>
                    </div-->
                    

                    <div if:true={isLoaded} class="slds-modal slds-fade-in-open">
                        <lightning-spinner alternative-text="Loading..." variant="brand"> </lightning-spinner>
                    </div>
                    <template if:true={otpSection}>
                        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                            class="aldar-modal slds-modal slds-fade-in-open">
                            <div class="slds-modal__container">
                                <button onclick={closeOTP}
                                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse">
                                    <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                                    </svg> <span class="slds-assistive-text">Cancel and close</span> </button>
                                <div class="slds-modal__header">
                                    <h1 id="modal-heading-01" class="slds-modal__title slds-hyphenate">Verify OTP</h1>
                                </div>
                                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                    <lightning-input data-id="OTP" onchange={handleChange}
                                        label="Enter OTP which is recived via email" disabled={readOnly} required>
                                    </lightning-input>
                                </div>
                                <div class="slds-modal__footer">
                                    <template if:false={progressBarCompleted}>
                                        <label>Files Upload (Completed {progressBarValue}%)</label>
                                        <lightning-progress-bar value={progressBarValue} size="large">
                                        </lightning-progress-bar>
                                    </template>
                                    <template if:true={progressBarCompleted}>
                                        <div if:true={isLoaded} class="slds-modal slds-fade-in-open">
                                            <lightning-spinner alternative-text="Loading..." variant="brand">
                                            </lightning-spinner>
                                        </div>
                                        <button onclick={resendOTP} data-id="ResendOTP" class="otp-btn"
                                            aria-label="Resend OTP">
                                            Resend OTP
                                        </button>
                                        <button onclick={handleOTP} data-id="submitOTP otb_button"
                                            class="otp-btn">Save</button>
                                    </template>
                                </div>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
                    </template>
                    <template if:true={success}>
                        <c-generic-modal onclose={closeModal} title="Thank you"
                            body="Thank you for registering on Aldar Broker Portal. Our Broker Management Team will be in touch with you soon">
                        </c-generic-modal>
                    </template>

                    <template if:true={successSubmit}>
                        <c-generic-modal onclose={closeSubmitModal} title="Thank you"
                            body="Your Request Successfully Updated.">
                        </c-generic-modal>
                    </template>
                    <div if:false={readOnly} class="captcha-container" style="padding-bottom: 4rem;">
                        <c-google-captcha oncaptcha={handleCaptcha} id="captcha">
                        </c-google-captcha>
                        <span class="Error" role="alert" id="CompanyEmailError" aria-hidden="false"
                            style="display:none;color:#f00">
                            Check The Captcha!
                        </span>
                    </div>

                    <div class="slds-p-around_medium xx_termsAndConditions">
                        <lightning-input type="checkbox" id="terms" checked={isAcceptedTAndC} name="authorize" 
                            onchange={handleTermsConditions} required="required">
                        </lightning-input>
                        <label for="terms" style="font-size: 13px;" class="slds-form-element__label">
                            Yes, I have read the <a onclick={handleTermsConditions}>Terms and Conditions</a> and consent to the <a href="https://www.aldar.com/en/privacy-policy" target="_blank">Privacy Policy</a> & <a href="https://www.aldar.com/en/terms-and-conditions" target="_blank"> Terms of Use</a>  from Aldar
                        </label>                
                    </div>
                    <div class="slds-p-around_medium xx_termsAndConditions">
                            <lightning-input type="checkbox" id="consent" label={label.LegalEntityConsent}
                                                    data-id="LegalEntityConsent" name="LegalEntityConsent"
                                                    checked={isLegalChecked} 
                                                    onchange={handleConsentCheck} required="required">
                            </lightning-input>
                    </div>

                </div>
            </div>
        </div>        

        <div class="page-footer">            
            <template if:false={readOnly}>
                <div class="submit-btn-container">
                    <button title="Submit" onclick={handleSubmit} class="submit-btn" disabled={readOnly}>
                        Submit</button>
                </div>
            </template>
            <template if:true={errorDialog}>
                <section aria-describedby="dialog-body-id-5" aria-labelledby="dialog-heading-id-2"
                    class="slds-popover slds-popover_error" role="dialog">
                    <button
                        class="slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse closeerror"
                        title="Close dialog" onclick={removeError}>
                        <svg class="slds-button__icon" aria-hidden="false">
                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"> </use>
                        </svg> <span class="slds-assistive-text">Close dialog</span> </button>
                    <header class="slds-popover__header">
                        <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                            <div class="slds-media__figure"> <span class="slds-icon_container slds-icon-utility-error">
                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="false">
                                        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#error">
                                        </use>
                                    </svg>
                                </span> </div>
                            <div class="slds-media__body">
                                <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-2"
                                    title="Resolve error">Resolve error
                                </h2>
                            </div>
                        </div>
                    </header>
                    <div class="slds-popover__body" id="dialog-body-id-5">
                        <ul class="slds-list_dotted slds-has-dividers_bottom">
                            <template for:each={errorDetails} for:item="err">
                                <li class="slds-item" key={err}> {err} </li>
                            </template>
                        </ul>
                    </div>
                </section>
            </template>
        </div>
    </div>    
</template>